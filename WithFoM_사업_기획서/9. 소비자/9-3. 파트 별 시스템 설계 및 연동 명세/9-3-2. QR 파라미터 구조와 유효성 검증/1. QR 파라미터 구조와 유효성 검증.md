# 1: QR 파라미터 구조와 유효성 검증

**표준 QR URL 구조**  
`https://withform.com/qr/gate?cid={campaign_id}&pid={partner_id}&lot={production_lot}&src={source_type}`  

| 파라미터 | 설명 |  
|---|---|  
| cid | 캠페인 ID (이미지/카피/게임/리워드 결정) |  
| pid | 파트너 매장 ID (인센티브·등급·재고·지역 통계) |  
| lot | 생산 배치 번호 (인쇄 불량·오타 역추적) |  
| src | 유입 채널 (cup/banner/invite 등) |  

**유효성 검증 (0.3초 이내)**  

| 항목 | 내용 |  
|---|---|  
| 캠페인 상태 | 만료/중지 시 "이벤트 종료" + 다른 캠페인 추천 |  
| 파트너 상태 | 폐업/해지 시 관리자 경보 + 인근 매장/온라인 혜택 연결 |  
| LOT 검증 | 미존재/이상 패턴 시 FDS 위험 점수 반영 |  
| 어뷰징 필터링 | 초단위 과다 요청 시 게임·리워드 제한 |  

**예외 상황 UX 원칙 (Soft Landing)**  

| 원칙 | 내용 |  
|---|---|  
| 404 금지 | 어떤 경우에도 "404/서버 오류" 화면 대신, "이벤트 종료/일시 중지 안내 + 다른 캠페인/혜택 제안" 구조로 설계 |  
| 사용자 경험 | 사용자는 "문제가 생겼다"는 느낌보다, "해당 이벤트는 끝났지만 다른 것을 즐길 수 있다"는 경험을 받도록 구성 |  
| 대체 제안 | 캠페인 종료 시 → 현재 진행 중인 유사 캠페인 추천, 파트너 폐업 시 → 인근 우수 매장 또는 온라인 전용 혜택 연결 |  

• 참조: WithFoM_Master_Planning_v3.10.md 9장 9-3절 9-3-2. QR 파라미터 구조와 유효성 검증

