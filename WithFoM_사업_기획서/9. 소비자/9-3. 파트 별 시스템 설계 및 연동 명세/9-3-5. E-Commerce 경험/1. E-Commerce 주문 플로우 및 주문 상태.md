# 1: E-Commerce 주문 플로우 및 주문 상태

**주문 플로우**  

| 단계 | 내용 |  
|---|---|  
| 추천 상품 진입 | 설문 결과 화면에서 '바로 구매', '장바구니 담기' |  
| 결제 화면 | 상품/옵션/수량, 배송지, 쿠폰/포인트 적용, 최종 결제 금액 |  
| 리워드 사용 | 광고주 쿠폰(1회/1일 한도), 광고주 포인트(결제액 비율 한도) |  

**주문 상태(State) 머신**  

| 상태 | 설명 | 취소/변경 |  
|---|---|---|  
| ORDER_CREATED | 주문 생성, 재고 가예약 | 자유롭게 취소·변경 가능 |  
| PAYMENT_PENDING | PG 결제 모듈 열림 (10분 타임아웃) | PG 창 닫기/타임아웃 시 자동 취소 |  
| PAYMENT_COMPLETED | 결제 승인, 재고 확정 차감, 주문번호 발급 | 즉시 전액 취소 가능 |  
| PREPARING_SHIPMENT | 포장·발주 준비 중 | 취소 "요청"만 가능 (판매자 거절 가능) |  
| SHIPPING | 배송 중, 송장 연동 | 취소 불가, 반품·수령 거부로 안내 |  
| DELIVERED | 배송 완료, [리뷰 쓰기]/[반품/교환 신청] 버튼 활성화 | 반품/교환 신청 가능 |  
| PURCHASE_CONFIRMED | 구매 확정, 정산 대상 | 취소/반품 불가, A/S로 연결 |  

• 참조: WithFoM_Master_Planning_v3.10.md 9장 9-3절 9-3-5. E-Commerce 경험

