# 5: 포인트 적립 시스템

## 개요

파트너 매장에서 결제 금액 기반 포인트 적립 기능을 제공하여 고객 충성도를 높이는 시스템입니다. 현재는 게임 당첨 보상으로 포인트 쿠폰을 제공하는 방식이며, 향후 결제 금액 기반 자동 적립 기능으로 확장할 예정입니다.

---

## 현재 구현 상태

### 현재: 게임 당첨 보상 포인트 쿠폰

- **형태**: 게임에서 당첨되는 쿠폰의 한 종류
- **예시**: "포인트 500점", "포인트 3000점"
- **제공 방식**: 게임 당첨 시 쿠폰 형태로 제공
- **사용 방식**: 결제 시 쿠폰처럼 사용

---

## 향후 확장 계획: 결제 금액 기반 포인트 적립

### Phase 1: 기본 적립 시스템 (6개월 후 출시 예정)

#### 1-1. 적립 방식

| 적립 유형 | 설명 | 예시 |
|---|---|---|
| 비율 적립 | 결제 금액 대비 일정 비율 적립 | 결제 금액의 5% 적립 |
| 고정 적립 | 결제 금액 구간별 고정 포인트 적립 | 100원당 1점 적립 |
| 하이브리드 | 비율 + 고정 조합 | 기본 3% + 1만원 이상 시 500점 추가 |

#### 1-2. 적립 조건 설정

| 설정 항목 | 설명 |
|---|---|
| 적립 비율/금액 | 파트너가 적립 비율 또는 고정 금액 설정 |
| 최소 결제 금액 | 포인트 적립 가능한 최소 결제 금액 |
| 적립 한도 | 1일/1회 적립 가능한 최대 포인트 |
| 적립 제외 메뉴 | 특정 메뉴 또는 카테고리 적립 제외 |

#### 1-3. 적립 프로세스

```
고객 결제 → 적립 조건 확인 → 포인트 자동 적립 → 적립 알림 발송 → 포인트 지갑 반영
```

### Phase 2: 고급 적립 시스템 (12개월 후 출시 예정)

#### 2-1. 등급별 차등 적립

| 고객 등급 | 적립 비율 | 추가 혜택 |
|---|---|---|
| 일반 | 3% | - |
| VIP | 5% | 생일 월 2배 적립 |
| VVIP | 10% | 생일 월 3배 적립 + 추가 쿠폰 |

#### 2-2. 이벤트 적립

| 이벤트 유형 | 설명 |
|---|---|
| 시간대별 추가 적립 | 특정 시간대 방문 시 포인트 2배 적립 |
| 요일별 추가 적립 | 특정 요일 방문 시 포인트 추가 적립 |
| 미션 적립 | 3회 연속 방문 시 보너스 포인트 |

#### 2-3. 포인트 사용 확장

| 사용 방식 | 설명 |
|---|---|
| 결제 시 할인 | 1포인트 = 1원으로 결제 시 사용 |
| 쿠폰 교환 | 포인트로 쿠폰 구매 |
| 상품 교환 | 포인트로 상품 교환 (파트너 제공 상품) |

---

## 기술 요구사항

### 데이터베이스 설계

#### 포인트 적립 이력 테이블

| 필드 | 타입 | 설명 |
|---|---|---|
| point_log_id | UUID | 포인트 이력 ID |
| user_id | UUID | 소비자 ID |
| partner_id | UUID | 파트너 ID |
| transaction_id | UUID | 결제 거래 ID (있는 경우) |
| point_type | ENUM | 적립/사용/소멸/전환 |
| point_amount | INT | 포인트 금액 |
| reason | VARCHAR | 적립/사용 사유 |
| created_at | TIMESTAMP | 적립/사용 일시 |
| expired_at | TIMESTAMP | 포인트 만료 일시 |

#### 포인트 정책 테이블

| 필드 | 타입 | 설명 |
|---|---|---|
| policy_id | UUID | 정책 ID |
| partner_id | UUID | 파트너 ID |
| earn_type | ENUM | 비율/고정/하이브리드 |
| earn_rate | DECIMAL | 적립 비율 (%) |
| earn_fixed | INT | 고정 적립 금액 |
| min_purchase | INT | 최소 결제 금액 |
| daily_limit | INT | 1일 적립 한도 |
| valid_days | INT | 포인트 유효 기간 (일) |

### API 설계

#### 1. 포인트 적립 API

```
POST /api/v1/points/earn
{
  "user_id": "uuid",
  "partner_id": "uuid",
  "transaction_id": "uuid",
  "purchase_amount": 10000
}

Response:
{
  "earned_points": 500,
  "total_points": 2500,
  "expires_at": "2026-12-31"
}
```

#### 2. 포인트 사용 API

```
POST /api/v1/points/use
{
  "user_id": "uuid",
  "partner_id": "uuid",
  "use_points": 500,
  "purchase_amount": 10000
}

Response:
{
  "used_points": 500,
  "remaining_points": 2000,
  "discount_amount": 500
}
```

#### 3. 포인트 조회 API

```
GET /api/v1/points/balance?user_id={uuid}&partner_id={uuid}

Response:
{
  "total_points": 2500,
  "available_points": 2000,
  "pending_points": 500,
  "expire_soon": [
    {
      "points": 200,
      "expires_at": "2026-01-31"
    }
  ]
}
```

---

## UI/UX 설계

### 파트너 포털: 포인트 정책 설정

#### 설정 화면 구성

```
[포인트 적립 설정]
├── 적립 방식 선택
│   ├── 비율 적립 (결제 금액의 X%)
│   ├── 고정 적립 (100원당 X점)
│   └── 하이브리드 적립
├── 적립 조건
│   ├── 최소 결제 금액
│   ├── 적립 한도 (1일/1회)
│   └── 적립 제외 메뉴
└── 사용 조건
    ├── 최소 사용 포인트
    ├── 최대 사용 비율
    └── 사용 제한 채널
```

### 소비자 앱: 포인트 지갑

#### 포인트 지갑 화면

```
[나의 포인트]
├── 총 보유 포인트: 2,500점
├── 사용 가능 포인트: 2,000점
├── 곧 만료될 포인트: 200점 (1월 31일)
└── 포인트 사용처
    └── [OO 카페에서 사용하기]
```

---

## 비즈니스 모델

### 파트너 혜택

| 혜택 | 설명 |
|---|---|
| 고객 재방문율 증가 | 포인트 적립으로 고객 재방문 유도 |
| 고객 데이터 수집 | 결제 이력 기반 고객 선호도 분석 |
| 마케팅 자동화 | 포인트 만료 안내 등 자동 리마케팅 |

### 위드폼 수익 모델

| 수익원 | 설명 |
|---|---|
| 포인트 수수료 | 포인트 적립 시 일정 수수료 (예: 적립금의 5%) |
| 정산 수수료 | 포인트 사용 시 정산 수수료 |
| 데이터 수익 | 고객 데이터 분석 리포트 제공 (프리미엄 멤버십) |

---

## 법적 고려사항

### 포인트 관련 법규

| 법령 | 주요 내용 |
|---|---|
| 전자상거래법 | 포인트는 선불식 지급수단에 해당, 5년 소멸시효 |
| 공정거래법 | 포인트 사용 조건 명확히 공시 |
| 개인정보보호법 | 포인트 적립/사용 이력 개인정보 보호 |

### 포인트 소멸 정책

| 항목 | 내용 |
|---|---|
| 소멸 시효 | 적립일로부터 5년 (법정 최대 기간) |
| 소멸 예정 알림 | 소멸 30일 전, 7일 전 알림 |
| 소멸 후 처리 | 소멸된 포인트 복구 불가 |

---

## 출시 로드맵

| Phase | 기능 | 예상 출시일 |
|---|---|---|
| Phase 0 (현재) | 게임 당첨 보상 포인트 쿠폰 | 런칭 시 |
| Phase 1 | 결제 금액 기반 자동 적립 | 런칭 +6개월 |
| Phase 2 | 등급별 차등 적립, 이벤트 적립 | 런칭 +12개월 |
| Phase 3 | 포인트 교환, 포인트몰 | 런칭 +18개월 |

---

## 경쟁사 분석

| 경쟁사 | 적립 방식 | 사용 방식 |
|---|---|---|
| 스타벅스 | 결제 금액의 10% 적립 (별 1개 = 12.5원) | 12개 모아 무료 음료 교환 |
| 투썸플레이스 | 100원당 1점 적립 | 포인트로 결제 시 할인 |
| 메가커피 | 1잔당 1스탬프 (포인트 대체) | 10개 모아 무료 음료 |

---

## 참고

- 현재 구현: 게임 당첨 보상 포인트 쿠폰 (`7-1-2-3. 리워드 정보 입력(선택 사항)\2.3. 포인트 리워드 입력`)
- 포인트 적립 기능은 향후 Phase 1에서 구현 예정
- 관련 법령: 전자상거래법, 공정거래법, 개인정보보호법
