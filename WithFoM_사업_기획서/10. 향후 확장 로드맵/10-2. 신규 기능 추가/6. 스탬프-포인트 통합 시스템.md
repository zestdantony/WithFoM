# 6: 스탬프-포인트 통합 시스템

## 개요

고객이 적립한 스탬프를 포인트로 전환하여 사용할 수 있는 통합 리워드 시스템입니다. 현재는 스탬프와 포인트가 분리되어 운영되지만, 향후 고객이 원하는 방식으로 혜택을 받을 수 있도록 유연성을 제공합니다.

---

## 현재 구현 상태

### 분리형 리워드 시스템

| 리워드 유형 | 적립 방식 | 사용 방식 | 제한사항 |
|---|---|---|---|
| 스탬프 | 결제 금액 기준 (예: 3,000원당 1개) | N개 모으면 혜택 교환 (예: 10개 → 무료 음료) | 정해진 혜택만 교환 가능 |
| 포인트 | 게임 당첨 (쿠폰 형태) | 결제 시 1점=1원으로 차감 | 금액 자유 사용 |

**제한사항:**
- 스탬프와 포인트가 완전히 분리되어 있음
- 스탬프를 포인트로 전환 불가
- 포인트를 스탬프로 전환 불가
- 고객이 리워드 선택권이 제한적

---

## 향후 확장 계획: 스탬프-포인트 통합

### Phase 1: 스탬프 → 포인트 단방향 전환 (12개월 후 출시 예정)

#### 1-1. 전환 방식

**기본 개념:**
```
스탬프 1개 = 1,000 포인트
(적립 기준 금액이 3,000원이면, 스탬프 1개 = 1,000포인트)
```

**전환 비율 산정:**
| 적립 기준 금액 | 스탬프 1개 가치 | 포인트 전환 비율 |
|---|---|---|
| 3,000원 | 300원 상당 (10% 적립 가정) | 1개 = 300포인트 |
| 5,000원 | 500원 상당 (10% 적립 가정) | 1개 = 500포인트 |
| 10,000원 | 1,000원 상당 (10% 적립 가정) | 1개 = 1,000포인트 |

**전환 규칙:**
- 파트너가 스탬프 적립 기준 금액과 포인트 전환 비율을 직접 설정
- 권장: 스탬프 1개 = 적립 기준 금액의 10% 포인트
- 예시: 3,000원당 스탬프 1개 → 1개 = 300포인트

#### 1-2. 고객 전환 프로세스

```
[고객 앱 - 리워드 지갑]
├── 보유 스탬프: 7개
├── 보유 포인트: 1,200점
└── [스탬프를 포인트로 전환하기] 버튼
    ↓
[전환 화면]
├── 전환할 스탬프 개수 선택 (슬라이더 또는 숫자 입력)
├── 전환 비율 안내: "스탬프 1개 = 300포인트"
├── 예상 포인트: "7개 × 300점 = 2,100포인트"
├── 주의사항: "전환 후 취소 불가"
└── [전환하기] 버튼
    ↓
[전환 완료]
├── 전환된 스탬프: 7개
├── 획득 포인트: 2,100점
└── 현재 포인트 잔액: 3,300점
```

#### 1-3. 전환 조건 및 제한

| 조건 | 내용 |
|---|---|
| 최소 전환 개수 | 1개 이상 |
| 최대 전환 개수 | 보유한 모든 스탬프 |
| 전환 취소 | 전환 후 취소 불가 (신중한 선택 필요) |
| 전환 수수료 | 없음 (무료) |
| 전환된 포인트 유효기간 | 포인트 정책에 따름 (일반적으로 1년) |

---

### Phase 2: 양방향 전환 (18개월 후 출시 예정)

#### 2-1. 포인트 → 스탬프 전환

**전환 비율:**
```
스탬프 1개 = 300포인트 (적립 기준 3,000원 가정)
→ 포인트 300개 = 스탬프 1개
```

**사용 시나리오:**
- 고객: "포인트 2,700점 있는데, 스탬프 3개만 더 있으면 무료 음료 받는데..."
- 해결: 포인트 900점을 스탬프 3개로 전환 → 스탬프 10개 완성 → 무료 음료 교환

**전환 제한:**
- 스탬프로 전환한 후에는 다시 포인트로 전환 불가 (무한 루프 방지)
- 1일 최대 전환 개수 제한 (예: 5개까지)

#### 2-2. 자동 최적화 추천

**AI 추천 시스템:**
```
[고객 상황]
- 보유 스탬프: 7개
- 보유 포인트: 2,000점
- 혜택 1: 스탬프 10개 → 아메리카노 무료 (4,500원 상당)
- 혜택 2: 포인트 2,000점 → 2,000원 할인

[AI 추천]
"스탬프 3개를 더 모으면 아메리카노 무료 (4,500원 상당)를 받을 수 있습니다.
포인트 900점을 스탬프 3개로 전환하시겠습니까?
→ 남은 포인트 1,100점 + 무료 음료 4,500원 = 총 5,600원 혜택"
```

---

### Phase 3: 통합 리워드 지갑 (24개월 후 출시 예정)

#### 3-1. 하나의 통합 포인트로 관리

**개념:**
```
[현재] 스탬프 vs 포인트 (분리)
↓
[향후] 모든 리워드를 "위드폼 포인트"로 통합
```

**통합 방식:**
- 모든 적립을 "위드폼 포인트"로 제공
- 고객이 원하는 방식으로 사용:
  - 결제 시 포인트로 차감 (1점 = 1원)
  - 무료 음료 교환 (3,000포인트 = 아메리카노 무료)
  - 할인 쿠폰 교환 (1,000포인트 = 500원 할인 쿠폰)

#### 3-2. 다양한 교환 옵션

| 포인트 | 교환 가능 혜택 |
|---|---|
| 500점 | 500원 할인 쿠폰 |
| 1,000점 | 사이드 메뉴 무료 |
| 3,000점 | 아메리카노 무료 |
| 5,000점 | 전 메뉴 50% 할인 쿠폰 |
| 10,000점 | 10잔 음료 교환권 |

---

## 기술 요구사항

### 데이터베이스 설계

#### 리워드 전환 이력 테이블

| 필드 | 타입 | 설명 |
|---|---|---|
| conversion_id | UUID | 전환 이력 ID |
| user_id | UUID | 소비자 ID |
| partner_id | UUID | 파트너 ID |
| conversion_type | ENUM | 스탬프→포인트, 포인트→스탬프 |
| stamp_amount | INT | 전환된 스탬프 개수 |
| point_amount | INT | 전환된 포인트 |
| conversion_rate | DECIMAL | 전환 비율 (1개당 포인트) |
| created_at | TIMESTAMP | 전환 일시 |
| is_cancelled | BOOLEAN | 취소 여부 (기본: false) |

#### 스탬프-포인트 정책 테이블

| 필드 | 타입 | 설명 |
|---|---|---|
| policy_id | UUID | 정책 ID |
| partner_id | UUID | 파트너 ID |
| stamp_earn_amount | INT | 스탬프 적립 기준 금액 |
| stamp_to_point_rate | INT | 스탬프 1개 = N 포인트 |
| point_to_stamp_rate | INT | 포인트 N개 = 스탬프 1개 |
| conversion_enabled | BOOLEAN | 전환 기능 활성화 여부 |
| daily_limit | INT | 1일 최대 전환 개수 |

### API 설계

#### 1. 스탬프 → 포인트 전환 API

```
POST /api/v1/rewards/convert/stamp-to-point
{
  "user_id": "uuid",
  "partner_id": "uuid",
  "stamp_count": 5
}

Response:
{
  "conversion_id": "uuid",
  "converted_stamps": 5,
  "earned_points": 1500,
  "conversion_rate": 300,
  "remaining_stamps": 2,
  "total_points": 3700
}
```

#### 2. 전환 비율 조회 API

```
GET /api/v1/rewards/conversion-rate?partner_id={uuid}

Response:
{
  "partner_id": "uuid",
  "stamp_to_point": {
    "rate": 300,
    "description": "스탬프 1개 = 300포인트"
  },
  "point_to_stamp": {
    "rate": 300,
    "description": "포인트 300개 = 스탬프 1개",
    "enabled": false
  }
}
```

#### 3. 전환 이력 조회 API

```
GET /api/v1/rewards/conversion-history?user_id={uuid}&partner_id={uuid}

Response:
{
  "conversions": [
    {
      "conversion_id": "uuid",
      "type": "stamp_to_point",
      "stamp_amount": 5,
      "point_amount": 1500,
      "created_at": "2026-06-15T10:30:00Z"
    }
  ]
}
```

---

## UI/UX 설계

### 파트너 포털: 전환 정책 설정

#### 설정 화면 구성

```
[스탬프-포인트 전환 설정]
├── 전환 기능 활성화
│   └── 토글 스위치 (ON/OFF)
├── 전환 비율 설정
│   ├── 스탬프 1개 = [___] 포인트
│   └── 권장: 적립 기준 금액의 10%
├── 전환 제한
│   ├── 1일 최대 전환 개수: [___] 개
│   └── 최소 전환 개수: [___] 개
└── 저장 버튼
```

**권장 설정 예시:**
```
적립 기준 금액: 3,000원
전환 비율: 1개 = 300포인트 (10%)
1일 최대 전환: 10개
최소 전환: 1개
```

### 소비자 앱: 리워드 전환 화면

#### 전환 화면 구성

```
[리워드 지갑]
├── 보유 스탬프: 7개 [스탬프 아이콘 7개 표시]
├── 보유 포인트: 1,200점
└── 스탬프 혜택 진행 상황
    ├── 10개 적립 시: 아메리카노 무료 (진행률 70%)
    └── [스탬프를 포인트로 전환] 버튼

[전환 화면]
├── 전환할 스탬프 개수
│   ├── 슬라이더 (1 ~ 7개)
│   └── 또는 [+] [-] 버튼으로 조절
├── 전환 정보
│   ├── 전환 비율: 1개 = 300포인트
│   ├── 전환 시 획득: 2,100포인트
│   └── 전환 후 총 포인트: 3,300점
├── 주의사항
│   └── "전환 후 취소할 수 없습니다"
└── [전환하기] 버튼 (확인 모달 필요)
```

---

## 비즈니스 모델

### 파트너 혜택

| 혜택 | 설명 |
|---|---|
| 고객 재방문 유도 | 스탬프가 모이지 않아도 포인트로 전환하여 사용 가능 → 리워드 활용도 증가 |
| 고객 만족도 향상 | 고객이 원하는 방식으로 리워드 사용 가능 |
| 매출 증대 | 포인트로 전환한 고객이 추가 구매할 가능성 증가 |

### 위드폼 수익 모델

| 수익원 | 설명 |
|---|---|
| 전환 수수료 | 스탬프→포인트 전환 시 소액 수수료 (예: 전환 금액의 1%) |
| 데이터 수익 | 고객 리워드 사용 패턴 분석 데이터 제공 (프리미엄 멤버십) |
| 광고 수익 | 전환 화면에 파트너 프로모션 노출 |

---

## 고객 경험 시나리오

### 시나리오 1: 스탬프가 부족할 때

```
[고객 상황]
- 보유 스탬프: 8개
- 목표: 스탬프 10개 → 무료 음료

[기존 방식]
→ 2번 더 방문해야 무료 음료 받음 (6,000원 추가 지출)

[전환 기능 사용]
→ 포인트 600점을 스탬프 2개로 전환
→ 스탬프 10개 완성 → 무료 음료 즉시 교환
→ 고객 만족도 ↑
```

### 시나리오 2: 스탬프가 만료될 때

```
[고객 상황]
- 보유 스탬프: 5개 (유효기간 3일 남음)
- 목표: 스탬프 10개 → 무료 음료

[기존 방식]
→ 3일 안에 5번 방문해야 함 (불가능) → 스탬프 소멸 → 고객 불만

[전환 기능 사용]
→ 스탬프 5개를 포인트 1,500점으로 전환
→ 포인트로 1,500원 할인받고 사용
→ 리워드를 잃지 않음 → 고객 만족도 ↑
```

---

## 법적 고려사항

### 리워드 전환 관련 법규

| 법령 | 주요 내용 |
|---|---|
| 전자상거래법 | 스탬프와 포인트 모두 선불식 지급수단에 해당 |
| 공정거래법 | 전환 비율 및 조건 명확히 공시 필요 |
| 개인정보보호법 | 전환 이력 개인정보 보호 |

### 약관 명시 사항

| 항목 | 내용 |
|---|---|
| 전환 비율 | 스탬프 1개 = N 포인트 명시 |
| 전환 조건 | 최소/최대 전환 개수, 1일 제한 등 |
| 취소 정책 | 전환 후 취소 불가 명시 |
| 유효기간 | 전환된 포인트의 유효기간 명시 |

---

## 출시 로드맵

| Phase | 기능 | 예상 출시일 |
|---|---|---|
| Phase 0 (현재) | 스탬프와 포인트 분리 운영 | 런칭 시 |
| Phase 1 | 스탬프 → 포인트 단방향 전환 | 런칭 +12개월 |
| Phase 2 | 양방향 전환 (포인트 → 스탬프) | 런칭 +18개월 |
| Phase 3 | 통합 리워드 지갑 (하나의 포인트로 통합) | 런칭 +24개월 |

---

## 경쟁사 사례

### 스타벅스

- 현재: 별(스탬프)만 운영, 포인트 전환 기능 없음
- 별 8개, 12개 등으로 다양한 쿠폰 교환 가능
- 전환 기능이 없어 고객이 별을 못 모으면 소멸

### 투썸플레이스

- 현재: 포인트만 운영, 스탬프 없음
- 포인트로 결제 시 차감 또는 쿠폰 교환
- 단일 리워드 시스템으로 관리 용이

### 메가커피

- 현재: 스탬프만 운영, 포인트 없음
- 스탬프 10개 → 무료 음료 교환
- 전환 기능 없음

**위드폼의 차별점:**
- 스탬프와 포인트를 모두 제공하면서 상호 전환 가능
- 고객이 원하는 방식으로 유연하게 사용 가능
- 리워드 활용도 최대화

---

## 참고

- 현재 구현: 스탬프와 포인트 분리 (`7-1-2-2. 리워드 정보 입력(선택 사항)`)
- 스탬프 → 포인트 전환 기능은 Phase 1에서 구현 예정
- 관련 법령: 전자상거래법, 공정거래법, 개인정보보호법
