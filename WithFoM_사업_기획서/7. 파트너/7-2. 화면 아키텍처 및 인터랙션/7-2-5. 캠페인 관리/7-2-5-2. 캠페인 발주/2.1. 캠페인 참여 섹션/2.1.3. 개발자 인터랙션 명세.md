<!-- WF:DOC=DEV -->
**2.1.3.** 개발자 인터랙션 명세  


**2.1.3.1.** 캠페인 매칭 정보 조회 API  

1: 엔드포인트  
　A. `GET /api/v1/partner/campaign/matching`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답 JSON  

```json
{
  "matching": {
    "campaignId": "CMP-2026-0042",
    "round": 3,
    "status": "MATCHED",
    "cupholderCount": 500,
    "cupholderType": "STANDARD",
    "campaignPeriod": {
      "startDate": "2026-03-01",
      "endDate": "2026-03-31"
    },
    "responseDeadline": "2026-02-13T15:00:00+09:00",
    "partnerGrade": "SILVER",
    "gradeDiscount": "FREE"
  }
}
```

3: 응답 필드  
　A. `status`: MATCHED(매칭됨), WAITING(대기 중), CONFIRMED(확정됨), ABANDONED(포기됨)  
　B. `responseDeadline`: 응답 기한(매칭 알림 수신 후 익일 15시)  
　C. `partnerGrade`: 현재 파트너 등급  


**2.1.3.2.** 캠페인 참여 확정 API  

1: 엔드포인트  
　A. `POST /api/v1/partner/campaign/confirm`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "campaignId": "CMP-2026-0042",
  "confirmType": "DIRECT"
}
```

3: 등급별 분기 로직  

```js
// 등급별 확정 처리 분기
if (partnerGrade >= 'SILVER') {
  // 즉시 확정 처리
  confirmType = 'DIRECT';
  updateStatus('CONFIRMED');
} else if (partnerGrade === 'BRONZE') {
  // 결제 화면 이동
  confirmType = 'PAYMENT_REQUIRED';
  redirectToPayment(campaignId);
  // 결제 완료 콜백 시 확정 처리
}
```

4: 응답  
　A. 성공: `{ "status": "CONFIRMED", "confirmedAt": "..." }`  
　B. 브론즈 결제 필요: `{ "status": "PAYMENT_REQUIRED", "paymentUrl": "..." }`  


**2.1.3.3.** 캠페인 포기 API  

1: 엔드포인트  
　A. `POST /api/v1/partner/campaign/abandon`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "campaignId": "CMP-2026-0042",
  "abandonReason": "TEMPORARY_CLOSURE",
  "additionalInput": "2026-04-01"
}
```

3: 포기 사유 코드  
　A. `SIZE_CHANGE`: 컵홀더 규격 변경으로 호환 불가  
　B. `TEMPORARY_CLOSURE`: 임시 휴무/단축 운영(추가 입력: 재오픈 날짜)  
　C. `SEASONAL_EVENT`: 시즌/행사 운영(추가 입력: 재오픈 날짜)  
　D. `LOW_TRAFFIC`: 방문객 부족  
　E. `POLICY_MISMATCH`: 매장 운영 정책 불일치  
　F. `ETC`: 기타(추가 입력: 직접 입력 내용)  


**2.1.3.4.** 컴포넌트 상태 관리  

1: 상태 정의  

```js
const matchingState = {
  status: 'IDLE',        // IDLE | MATCHED | CONFIRMED | ABANDONED | WAITING
  campaignData: null,    // 매칭된 캠페인 정보
  responseDeadline: null, // 응답 기한
  isLoading: false,
  error: null
};

const confirmDialogState = {
  isOpen: false,
  message: '',
  isProcessing: false
};

const abandonDialogState = {
  isOpen: false,
  selectedReasons: [],   // 복수 선택 가능
  additionalInputs: {},  // 사유별 추가 입력값
  isProcessing: false
};
```


**2.1.3.5.** 접근성 요구사항  

1: 다이얼로그 접근성  
　A. 확인/포기 팝업: `role="dialog"`, `aria-modal="true"`, `aria-labelledby` 지정  
　B. 팝업 열림 시 포커스 트랩 적용, 닫힘 시 트리거 버튼으로 포커스 복귀  
　C. ESC 키로 팝업 닫기 지원  

2: 체크박스 접근성  
　A. 포기 사유 체크박스: `role="checkbox"`, `aria-checked` 상태 관리  
　B. 조건부 입력창: `aria-expanded` 연동, 선택 시 입력창으로 포커스 이동  


**2.1.3.6.** 에러 처리  

1: 에러 코드  
　A. `CMP_001`: 매칭 정보 조회 실패 → "캠페인 매칭 정보를 불러올 수 없습니다. 잠시 후 다시 시도해 주세요." 토스트 표시  
　B. `CMP_002`: 참여 확정 실패 → "캠페인 참여 확정에 실패했습니다. 잠시 후 다시 시도해 주세요." 토스트 표시, 재시도 버튼 제공  
　C. `CMP_003`: 포기 처리 실패 → "캠페인 포기 처리에 실패했습니다. 잠시 후 다시 시도해 주세요." 토스트 표시, 재시도 버튼 제공  
