<!-- WF:DOC=DEV -->
**2.2.3.** 개발자 인터랙션 명세  


**2.2.3.1.** 캠페인 현황 조회 API  

1: 엔드포인트  
　A. `GET /api/v1/partner/campaign/status`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답 JSON  

```json
{
  "campaigns": [
    {
      "campaignId": "CMP-2026-0042",
      "round": 3,
      "totalCupholders": 500,
      "cupholderType": "STANDARD",
      "period": {
        "startDate": "2026-03-01",
        "endDate": "2026-03-31"
      },
      "stockRate": {
        "percentage": 60,
        "totalQuantity": 500,
        "receivedCount": 3,
        "quantityPerReceive": 100,
        "estimatedEndDate": "2026-03-31"
      },
      "inventoryRate": {
        "percentage": 45,
        "receivedQuantity": 300,
        "consumedQuantity": 165,
        "remainingQuantity": 135,
        "estimatedUsagePeriod": "12일"
      },
      "dailyAvgConsumption": 14,
      "receiveStatus": "RECEIVED"
    }
  ]
}
```

3: 응답 필드  
　A. `stockRate`: 입고율 정보(프로그래스 바 렌더링용)  
　B. `inventoryRate`: 재고율 정보(프로그래스 바 렌더링용)  
　C. `dailyAvgConsumption`: 하루 평균 소진량  
　D. `receiveStatus`: PENDING(입고 예정), RECEIVED(입고 완료), SCHEDULED(입고 예정일 확정)  


**2.2.3.2.** 캠페인 검색 API  

1: 엔드포인트  
　A. `GET /api/v1/partner/campaign/search?year={year}&month={month}`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 파라미터  
　A. `year` (필수): 검색 연도 (예: 2026)  
　B. `month` (선택): 검색 월 (예: 3), 미입력 시 해당 연도 전체 조회  

3: 응답 JSON  

```json
{
  "results": [
    {
      "campaignId": "CMP-2026-0042",
      "round": 3,
      "period": {
        "startDate": "2026-03-01",
        "endDate": "2026-03-31"
      }
    }
  ],
  "totalCount": 1
}
```


**2.2.3.3.** 내부 계산 로직  

1: 하루 평균 소진량 계산 방식  

```js
// 하루 평균 소진량 계산
function calculateDailyAvgConsumption(data) {
  const { receivedDate, additionalOrderDates, receivedQuantity, thresholdRate } = data;
  
  // 입고일부터 현재까지의 일수 계산
  const daysSinceReceived = diffDays(receivedDate, today());
  
  // 추가 발주 시점의 재고량 (임계치 기반)
  const thresholdQuantity = receivedQuantity * (thresholdRate / 100);
  
  // 소진량 = 입고 수량 - 현재 재고량
  const totalConsumed = receivedQuantity - currentInventory;
  
  // 하루 평균 소진량
  const dailyAvg = totalConsumed / daysSinceReceived;
  
  return Math.round(dailyAvg);
}
// ↳ 추가 발주 할 때마다 재계산하여 업데이트
```


**2.2.3.4.** 컴포넌트 구현  

1: 프로그래스 바 렌더링  

```js
// 프로그래스 바 컴포넌트 상태
const progressBarState = {
  stockRate: {
    percentage: 0,       // 입고율 퍼센트
    colorThreshold: {
      normal: '#4CAF50',  // 60% 이상
      warning: '#FF9800', // 30~59%
      danger: '#F44336'   // 30% 미만
    }
  },
  inventoryRate: {
    percentage: 0,       // 재고율 퍼센트
    colorThreshold: {
      normal: '#4CAF50',
      warning: '#FF9800',
      danger: '#F44336'
    }
  }
};
```

2: 드롭다운 상태 관리  

```js
const dropdownState = {
  isOpen: false,
  selectedRound: null,    // 선택된 회차
  visibleItems: 10,       // 드롭다운 표시 개수
  campaigns: [],          // 전체 캠페인 목록
  isLoading: false
};

const searchState = {
  year: null,
  month: null,
  results: [],
  isSearching: false
};
```


**2.2.3.5.** 에러 처리  

1: 에러 코드  
　A. `STS_001`: 캠페인 현황 조회 실패 → "캠페인 현황 정보를 불러올 수 없습니다. 잠시 후 다시 시도해 주세요." 토스트 표시, 재시도 버튼 제공  
　B. `STS_002`: 캠페인 검색 실패 → "캠페인 검색에 실패했습니다. 검색 조건을 확인 후 다시 시도해 주세요." 토스트 표시  
