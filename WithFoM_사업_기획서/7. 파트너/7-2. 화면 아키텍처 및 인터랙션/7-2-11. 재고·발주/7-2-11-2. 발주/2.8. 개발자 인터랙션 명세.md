**2.8.** 개발자 인터랙션 명세  


**2.8.1.** 데이터 연동 방식  

**2.8.1.1.** REST API 기반  
1: 연동 방식  
　A. 상품 조회, 장바구니 관리, 주문 처리 등 REST API  
2: 실시간 갱신  
　A. 주문 상태 변경: WebSocket 또는 폴링  
　B. 배송 상태 갱신: 택배사 API 연동  

**2.8.1.2.** WebSocket 연결 (선택적)  
1: 연결 엔드포인트  
　A. wss://api.withfom.com/partner/orders/realtime  
2: 이벤트 수신  
　A. order.status_changed: 주문 상태 변경  
　B. order.delivery_completed: 배송 완료  
　C. order.auto_receipt: 자동 입고 완료  


**2.8.2.** API 명세  

**2.8.2.1.** 상품 목록 조회  
1: 엔드포인트  
　A. GET /api/v1/partner/shop/products  
2: 요청 파라미터  
　A. category (optional): 카테고리 필터  
　B. search (optional): 검색어  
　C. sort: 정렬 기준 (popular, newest, price_asc, price_desc)  
　D. page, limit: 페이지네이션  
3: 응답 구조  

```json
{
  "products": [
    {
      "productId": "PROD-001",
      "productName": "종이컵 12oz (50개입)",
      "category": "컵/용기류",
      "price": 2500,
      "unit": "팩",
      "unitQuantity": 50,
      "imageUrl": "https://...",
      "badges": ["BEST"],
      "inStock": true,
      "stockQuantity": 1500,
      "linkedInventoryItem": {
        "itemId": "INV-001",
        "currentStock": 450,
        "stockStatus": "normal"
      }
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "totalPages": 5,
    "totalCount": 98
  }
}
```


**2.8.2.2.** 장바구니 조회  
1: 엔드포인트  
　A. GET /api/v1/partner/shop/cart  
2: 응답 구조  

```json
{
  "items": [
    {
      "cartItemId": "CART-001",
      "product": {
        "productId": "PROD-001",
        "productName": "종이컵 12oz (50개입)",
        "price": 2500,
        "imageUrl": "https://...",
        "inStock": true
      },
      "quantity": 10,
      "subtotal": 25000
    }
  ],
  "summary": {
    "totalItems": 3,
    "totalQuantity": 25,
    "productAmount": 85000,
    "shippingFee": 0,
    "discount": 0,
    "totalAmount": 85000
  }
}
```


**2.8.2.3.** 장바구니 추가  
1: 엔드포인트  
　A. POST /api/v1/partner/shop/cart  
2: 요청 바디  

```json
{
  "productId": "PROD-001",
  "quantity": 5
}
```

3: 응답 구조  

```json
{
  "success": true,
  "cartItemId": "CART-001",
  "message": "장바구니에 추가되었습니다.",
  "cartItemCount": 3
}
```


**2.8.2.4.** 주문 생성  
1: 엔드포인트  
　A. POST /api/v1/partner/shop/orders  
2: 요청 바디  

```json
{
  "cartItemIds": ["CART-001", "CART-002"],
  "shippingAddress": {
    "recipientName": "OO카페",
    "phone": "02-1234-5678",
    "address": "서울시 강남구 테헤란로 123",
    "addressDetail": "1층",
    "zipCode": "06234"
  },
  "shippingMemo": "경비실에 맡겨주세요",
  "paymentMethod": "card",
  "cardId": "CARD-001"
}
```

3: 응답 구조  

```json
{
  "success": true,
  "orderId": "PO-2026-001234",
  "orderNumber": "1234567890",
  "totalAmount": 85000,
  "status": "pending",
  "estimatedDeliveryDate": "2026-01-30"
}
```


**2.8.2.5.** 주문 목록 조회  
1: 엔드포인트  
　A. GET /api/v1/partner/shop/orders  
2: 요청 파라미터  
　A. status (optional): 주문 상태 필터  
　B. startDate, endDate: 기간 필터  
　C. page, limit: 페이지네이션  
3: 응답 구조  

```json
{
  "orders": [
    {
      "orderId": "PO-2026-001234",
      "orderNumber": "1234567890",
      "orderDate": "2026-01-28T10:25:00Z",
      "status": "delivered",
      "totalAmount": 85000,
      "productCount": 3,
      "mainProductName": "종이컵 12oz (50개입)",
      "trackingNumber": "1234567890123",
      "deliveredAt": "2026-01-30T14:00:00Z",
      "receiptConfirmed": false
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "totalPages": 3,
    "totalCount": 42
  }
}
```


**2.8.2.6.** 배송 완료 시 자동 입고  
1: 서버 측 처리  
　A. 택배사 API에서 배송 완료 콜백 수신  
　B. 주문 상태 "delivered"로 변경  
　C. 주문 상품을 재고 관리에 자동 입고  
　D. 재고 변동 이력에 "입고 (발주연동)" 기록  
2: 클라이언트 알림  

```json
{
  "type": "order.delivery_completed",
  "data": {
    "orderId": "PO-2026-001234",
    "deliveredAt": "2026-01-30T14:00:00Z",
    "autoReceiptItems": [
      {
        "productId": "PROD-001",
        "inventoryItemId": "INV-001",
        "quantity": 500,
        "previousStock": 450,
        "newStock": 950
      }
    ],
    "requiresConfirmation": true
  }
}
```


**2.8.3.** 컴포넌트 상태 관리  

**2.8.3.1.** 주문 상태 정의  
1: 주문 상태 (orderStatus)  
　A. pending: 주문확인 대기  
　B. confirmed: 주문 확인  
　C. preparing: 상품 준비중  
　D. shipping: 배송중  
　E. delivered: 배송완료  
　F. cancelled: 주문취소  
　G. returning: 반품 진행중  
2: 입고 확인 상태 (receiptStatus)  
　A. pending: 확인 대기  
　B. confirmed: 확인 완료  
　C. adjusted: 수량 조정됨  
　D. disputed: 이의 신청됨  


**2.8.4.** 에러 처리  

**2.8.4.1.** 에러 코드 정의  
1: 에러 코드  
　A. SHP_001: 상품 조회 실패  
　B. SHP_002: 품절 상품  
　C. SHP_003: 장바구니 추가 실패  
　D. SHP_004: 결제 실패  
　E. SHP_005: 주문 생성 실패  
　F. SHP_006: 주문 취소 실패 (배송 시작 후)  


**2.8.5.** 접근성 요구사항  

**2.8.5.1.** ARIA 레이블  
1: 상품 카드  
　A. role="article"  
　B. aria-label="{상품명}, 가격 {가격}원"  
2: 장바구니 버튼  
　A. aria-label="장바구니에 추가"  
3: 장바구니 아이콘  
　A. aria-label="장바구니, {N}개 상품"  

**2.8.5.2.** 키섹션 내비게이션  
1: Tab 순서  
　A. 검색창 → 카테고리 → 상품 그리드 → 장바구니 아이콘  
2: 상품 그리드  
　A. 화살표 키로 상품 간 이동  
　B. Enter로 상세 페이지 진입  


**2.8.6.** 성능 최적화  

**2.8.6.1.** 이미지 최적화  
1: 상품 이미지  
　A. 썸네일: 200×200px (WebP)  
　B. 상세: 600×600px (WebP)  
　C. 지연 로딩 (lazy loading) 적용  

**2.8.6.2.** 데이터 캐싱  
1: 캐싱 전략  
　A. 상품 목록: 5분 캐시  
　B. 장바구니: 실시간 동기화  
　C. 주문 내역: 1분 캐시, 상태 변경 시 무효화  


• 참조: 7-2-11-1. 재고 관리 > 개발자 명세
