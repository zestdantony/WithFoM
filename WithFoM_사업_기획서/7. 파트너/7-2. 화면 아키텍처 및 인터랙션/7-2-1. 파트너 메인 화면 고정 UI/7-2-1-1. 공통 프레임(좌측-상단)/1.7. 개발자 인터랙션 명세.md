<!-- WF:DOC=DEV -->
**1.7.** 개발자 인터랙션 명세  


**1.7.1.** 위드폼 로고 클릭 처리  

1: 홈 화면(대시섹션)으로 이동  
　A. 트리거: 위드폼 로고 클릭 이벤트  
　B. 현재 경로 확인: window.location.pathname 또는 router.pathname  
　C. 이동 처리  

| 조건 | 동작 |
|---|---|
| 현재 경로가 /partner/dashboard 또는 /partner/home인 경우 | 페이지 이동 없음 (현재 화면 유지) |
| 그 외의 경우 | /partner/dashboard 또는 /partner/home로 이동 |

2: 페이지 이동 구현  
　A. 방법 1: window.location.href = '/partner/dashboard'  
　B. 방법 2: router.push('/partner/dashboard') (라우터 사용 시)  
　C. 방법 3: router.replace('/partner/dashboard') (히스토리 스택에 추가하지 않음)  

3: 현재 페이지 확인 로직  
　A. 현재 경로가 홈 화면인지 확인  
　B. 홈 화면인 경우: 클릭 이벤트 무시 또는 아무 동작 없음  
　C. 홈 화면이 아닌 경우: 홈 화면으로 이동  


**1.7.2.** 화면 초기 로딩  

1: API 호출  
　A. 엔드포인트: GET /api/partner/header/info  
　B. 응답 데이터  

| 필드 | 타입 | 설명 |
|---|---|---|
| partner_grade | string | 현재 파트너 등급 (bronze, silver, gold, platinum) |
| membership_plan | string | 현재 멤버십 플랜 (basic, plus, premium) |
| service_type | string | 현재 서비스 타입 (reward, order, hybrid) |
| grade_info | object | 등급 정보 (등급명, 유지 기간 등) |
| membership_info | object | 멤버십 정보 (플랜명, 구독 기간, 갱신일 등) |
| service_type_info | object | 서비스 타입 정보 (리워드 활성화 여부, 오더 활성화 여부) |
| unmatched_status | object | 미매칭 상태 정보 (미매칭 여부, 경과 일수, 경고 레벨) |

2: 로딩 상태 처리  
　A. 등급 마크, 멤버십 뱃지, 서비스 타입 아이콘 로딩 중: 스켈레톤 UI 또는 로딩 스피너 표시  
　B. 로딩 완료 후: 등급 마크, 멤버십 뱃지, 서비스 타입 아이콘 렌더링  


**1.7.3.** 등급 마크 클릭 처리  

1: 등급 설명 모달 오픈  
　A. 트리거: 등급 마크 클릭 이벤트  
　B. API 호출: GET /api/partner/grade/detail  
　C. 요청 파라미터: 없음 (현재 파트너의 등급 정보 자동 조회)  
　D. 응답 데이터  

| 필드 | 타입 | 설명 |
|---|---|---|
| current_grade | string | 현재 등급 (bronze, silver, gold, platinum) |
| grade_name | string | 등급명 (한글) |
| maintain_period | string | 등급 유지 기간 |
| benefits | object | 현재 등급의 혜택 상세 정보 |
| grade_calculation_info | object | 등급 산정 안내 정보 (자동 산정 시스템 안내) |
| unmatched_info | object | 미매칭 상태 정보 (경과 일수, 다운그레이드 예정일, 경고 레벨) |
| grade_maintenance | object | 등급 유지 조건 정보 (6개월 이내 매칭 시 유지) |

2: 모달 상태 관리  
　A. 상태 변수: isGradeModalOpen = true  
　B. 모달 내용: API 응답 데이터 기반 렌더링  
　C. 등급별 혜택 상세 설명 표시 (1.3.4. 등급 설명 상세 내용 참조)  
　D. 간단한 등급 산정 안내 설명 표시  
　E. 모달 닫기: isGradeModalOpen = false  


**1.7.4.** 멤버십 뱃지 클릭 처리  

1: 멤버십 플랜 설명 모달 오픈  
　A. 트리거: 멤버십 뱃지 클릭 이벤트  
　B. API 호출: GET /api/partner/membership/current-plan  
　C. 요청 파라미터: 없음 (현재 파트너의 멤버십 정보 자동 조회)  
　D. 응답 데이터  

| 필드 | 타입 | 설명 |
|---|---|---|
| current_plan | string | 현재 멤버십 플랜 (basic, plus, premium) |
| plan_name | string | 플랜명 (한글) |
| subscription_start | string | 구독 시작일 |
| subscription_end | string | 구독 종료일 (또는 갱신일) |
| benefits | array | 현재 플랜의 혜택 리스트 |
| upgrade_options | array | 업그레이드 가능한 플랜 정보 (프리미엄이 아닌 경우) |

2: 모달 상태 관리  
　A. 상태 변수: isMembershipModalOpen = true  
　B. 모달 내용: API 응답 데이터 기반 렌더링  
　C. 모달 닫기: isMembershipModalOpen = false  

3: "플러스로 업그레이드" 또는 "프리미엄으로 업그레이드" 버튼 클릭  
　A. 페이지 이동: window.location.href = '/partner/membership/subscribe?plan=plus&source=header_badge'  
　B. 또는 라우터 사용: router.push({ path: '/partner/membership/subscribe', query: { plan: 'plus', source: 'header_badge' } })  


**1.7.5.** 서비스 타입 아이콘 클릭 처리  

1: 서비스 타입 설명 모달 오픈  
　A. 트리거: 서비스 타입 아이콘 클릭 이벤트  
　B. 모달 상태 변수: isServiceTypeModalOpen = true  
　C. 모달 내용: 서비스 타입별 아이콘 설명 및 서비스 제공 내용 표시  

2: 모달 내용 구성  

| 서비스 타입 | 아이콘 설명 | 서비스 제공 내용 |
|---|---|---|
| reward | 리워드 아이콘: 선물/쿠폰 아이콘으로 표시, 리워드 테마 색상 적용 | • QR 스캔 후 게임 참여 가능<br>• 광고주 리워드: 제품 할인 쿠폰, 무료 증정, E-Com 포인트, 샘플 키트<br>• 파트너 리워드: 매장 전용 혜택 (사이즈업, 디저트 증정 등)<br>• 스탬프 적립: 특정 금액 이상 결제 시 적립, 완성 시 보상 쿠폰 발급<br>• 앱 주문·결제 기능은 사용 불가 |
| order | 오더 아이콘: 카트/주문 아이콘으로 표시, 오더 테마 색상 적용 | • 앱 주문·결제 기능 제공<br>• 메뉴 오더 및 메뉴 관리 기능 사용 가능<br>• 실시간 주문 리스트 확인<br>• 카테고리/메뉴/옵션 관리<br>• QR 스캔 게임/리워드 기능은 사용 불가 |
| hybrid | 리워드 아이콘 + 오더 아이콘 나란히 표시 | • 리워드형과 오더형의 모든 기능 사용 가능<br>• QR 스캔 게임/리워드 및 앱 주문·결제 모두 이용 가능<br>• 쿠폰/포인트 결제 시 자동 적용 |

3: 모달 상태 관리  
　A. 상태 변수: isServiceTypeModalOpen = true  
　B. 모달 내용: 서비스 타입별 설명 데이터 기반 렌더링  
　C. 모달 닫기: isServiceTypeModalOpen = false  


**1.7.6.** 호버 툴팁 처리  

1: 등급 마크 호버  
　A. 이벤트: mouseenter  
　B. 지연 시간: 500ms (0.5초)  
　C. 툴팁 표시: showTooltip('등급 마크', '클릭하면 등급 설명이 표시됩니다')  
　D. 이벤트: mouseleave  
　E. 툴팁 숨김: hideTooltip()  

2: 멤버십 뱃지 호버  
　A. 이벤트: mouseenter  
　B. 지연 시간: 500ms (0.5초)  
　C. 툴팁 표시: showTooltip('멤버십 뱃지', '클릭하면 멤버십 플랜 설명이 표시됩니다')  
　D. 이벤트: mouseleave  
　E. 툴팁 숨김: hideTooltip()  

3: 서비스 타입 아이콘 호버  
　A. 이벤트: mouseenter  
　B. 지연 시간: 500ms (0.5초)  
　C. 툴팁 표시: 서비스 타입별 상세 정보  

| 서비스 타입 | 툴팁 내용 |
|---|---|
| reward | '리워드 서비스 활성화<br>QR 스캔 후 게임/리워드 이용 가능' |
| order | '오더 서비스 활성화<br>앱 주문·결제 이용 가능' |
| hybrid | '리워드 + 오더 서비스 활성화<br>QR 스캔 게임/리워드 및 앱 주문·결제 모두 이용 가능' |

　D. 이벤트: mouseleave  
　E. 툴팁 숨김: hideTooltip()  

4: 모바일 환경  
　A. 호버 이벤트 비활성화: 모바일에서는 툴팁 표시하지 않음  
　B. 터치 이벤트만 처리: 탭 시 바로 모달 또는 페이지 이동  


**1.7.7.** 모달/팝오버 닫기 처리  

1: 닫기 버튼 클릭  
　A. 이벤트: onClick  
　B. 동작: 모달 상태 변수 false로 설정  
　C. 포커스 복귀: 모달을 열었던 요소로 포커스 이동 (접근성 고려)  

2: 배경 클릭  
　A. 이벤트: onClick (배경 영역)  
　B. 동작: 모달 상태 변수 false로 설정  
　C. 이벤트 전파 방지: event.stopPropagation()  

3: ESC 키 입력  
　A. 이벤트: keydown (key === 'Escape')  
　B. 동작: 모달 상태 변수 false로 설정  
　C. 전역 이벤트 리스너: document.addEventListener('keydown', handleEscape)  


**1.7.8.** 미매칭 경고 배지 처리  

1: 미매칭 상태 조회  
　A. API 응답의 unmatched_status 필드 확인  
　B. 응답 데이터 구조  

```json
{
  "unmatched_status": {
    "is_unmatched": true,
    "unmatched_days": 95,
    "warning_level": "first",
    "downgrade_date": "2025-07-15",
    "days_until_downgrade": 85,
    "alerts": {
      "first_warning": { "sent": true, "sent_date": "2025-04-15" },
      "final_warning": { "sent": false, "trigger_date": "2025-06-08" }
    }
  }
}
```

2: 경고 배지 렌더링 조건  

| 조건 | 배지 표시 |
|---|---|
| unmatched_days < 90 | 배지 없음 |
| unmatched_days >= 90 && warning_level === "first" | 노란색 주의 배지 (⚠️) |
| unmatched_days >= 173 && warning_level === "final" | 빨간색 긴급 배지 (🚨) |

3: 경고 배지 클릭 처리  
　A. 트리거: 경고 배지 클릭 이벤트  
　B. 모달 상태 변수: isUnmatchedWarningModalOpen = true  
　C. 모달 내용 구성  

| 항목 | 내용 |
|---|---|
| 현재 상태 | "캠페인 미매칭 {N}일 경과" |
| 현재 등급 | "현재 {현재등급} 등급" |
| 다운그레이드 등급 | "{다운그레이드등급} 등급으로 조정 예정" |
| 다운그레이드 예정일 | "{YYYY-MM-DD} 다운그레이드 예정" |
| 남은 기간 | "{N}일 남음" |
| 안내 메시지 (1차) | "마지막 캠페인 종료 후 3개월이 지났습니다. {현재등급} 등급 유지를 위해 새로운 캠페인에 참여가 시급합니다. (미참여 시 {다운그레이드등급}로 조정)" |
| 안내 메시지 (최종) | "등급 조정까지 7일 남았습니다. {현재등급} 등급과 혜택을 유지하기 위해 새 캠페인 참여가 시급합니다. (미참여 시 {다운그레이드등급}로 조정)" |
| CTA 버튼 | "캠페인 참여하기" → 캠페인 발주 페이지로 이동 |

　D. 알림 채널  
　　a. 푸시 알림: 필수  
　　b. 앱 내 알림: 필수 (알림 센터 저장)  
　　c. 이메일: 선택 (알림 설정에서 활성화한 경우)

4: 실시간 업데이트  
　A. WebSocket 이벤트: grade.unmatched_warning  
　B. 이벤트 수신 시: 경고 배지 상태 업데이트, 알림 표시  
　C. grade.downgrade 이벤트: 등급 마크 변경, 다운그레이드 알림 모달 표시  


**1.7.9.** 에러 처리  

1: 등급 정보 로딩 실패  
　A. 에러 메시지: "등급 정보를 불러오지 못했습니다"  
　B. 재시도 버튼 제공: "다시 시도" 버튼 클릭 시 API 재호출  
　C. 에러 로그 기록: console.error 또는 에러 로깅 서비스에 기록  

2: 멤버십 정보 로딩 실패  
　A. 에러 메시지: "멤버십 정보를 불러오지 못했습니다"  
　B. 재시도 버튼 제공: "다시 시도" 버튼 클릭 시 API 재호출  
　C. 에러 로그 기록: console.error 또는 에러 로깅 서비스에 기록  

3: 서비스 타입 정보 로딩 실패  
　A. 에러 메시지: "서비스 타입 정보를 불러오지 못했습니다"  
　B. 재시도 버튼 제공: "다시 시도" 버튼 클릭 시 API 재호출  
　C. 에러 로그 기록: console.error 또는 에러 로깅 서비스에 기록  
　D. 기본값 표시: 서비스 타입 정보가 없을 경우 기본 아이콘 표시  

4: 서비스 타입 설명 모달 로딩 실패  
　A. 에러 메시지: "서비스 타입 설명을 불러오지 못했습니다"  
　B. 재시도 버튼 제공: "다시 시도" 버튼 클릭 시 모달 재오픈  
　C. 에러 로그 기록: console.error 또는 에러 로깅 서비스에 기록  

5: 네트워크 오류  
　A. 오프라인 감지 시: "네트워크 연결을 확인해주세요" 메시지 표시  
　B. 재시도 버튼 제공  
　C. 오프라인 상태 표시: 등급 마크, 멤버십 뱃지, 서비스 타입 아이콘 비활성화  


**1.7.9.** 접근성 및 UX 고려사항  

1: 위드폼 로고 접근성  
　A. 로고에 적절한 ARIA 라벨 적용: aria-label="위드폼 홈으로 이동"  
　B. 키섹션 네비게이션: Tab 키로 포커스 이동 가능  
　C. Enter 키 또는 Space 키로 클릭 동작 활성화  
　D. 포커스 표시: 포커스 시 아웃라인 표시  

2: 키섹션 네비게이션  
　A. Tab 키로 위드폼 로고, 등급 마크, 멤버십 뱃지, 서비스 타입 아이콘 간 이동  
　B. Enter 키 또는 Space 키로 클릭 동작 활성화  
　C. ESC 키로 모달 닫기  

3: 스크린 리더 지원  
　A. 등급 마크에 적절한 ARIA 라벨 적용: aria-label="현재 등급: {등급명}, 클릭하면 등급 설명이 표시됩니다"  
　B. 멤버십 뱃지에 적절한 ARIA 라벨 적용: aria-label="현재 멤버십: {플랜명}, 클릭하면 멤버십 플랜 설명이 표시됩니다"  
　C. 서비스 타입 아이콘에 적절한 ARIA 라벨 적용: aria-label="서비스 타입: {타입명}, 클릭하면 서비스 타입 설정으로 이동합니다"  
　D. 모달에 aria-modal="true", role="dialog" 적용  
　E. 모달 제목에 aria-labelledby 적용  

4: 로딩 상태 피드백  
　A. 모달 오픈 시 로딩 중: 스켈레톤 UI 또는 로딩 스피너 표시  
　B. 버튼 클릭 후 로딩 중: 버튼 비활성화 + 스피너 표시  
　C. 중복 클릭 방지: 클릭 후 즉시 버튼 비활성화  

5: 애니메이션  
　A. 모달 오픈: fade-in 애니메이션 (0.2초)  
　B. 모달 닫기: fade-out 애니메이션 (0.2초)  
　C. 툴팁 표시: fade-in 애니메이션 (0.1초)  
　D. 툴팁 숨김: fade-out 애니메이션 (0.1초)  
　E. 서비스 타입 아이콘 변경: fade-in/fade-out 애니메이션 (0.15초)  

6: 레이아웃 반응형 처리  
　A. 파트너 로고, 매장명, 등급 마크, 멤버십 뱃지, 서비스 타입 아이콘을 한 줄에 배치  
　B. 화면 크기에 따라 로고, 매장명, 아이콘 크기 자동 조정  
　C. 모바일: 로고 크기 축소 (예: 최대 높이 24px), 매장명 텍스트 크기 축소 (예: 12px), 아이콘 크기 축소 (예: 20px)  
　D. 태블릿: 로고 크기 중간 (예: 최대 높이 32px), 매장명 텍스트 크기 중간 (예: 14px), 아이콘 크기 중간 (예: 24px)  
　E. 데스크톱: 로고 크기 전체 (예: 최대 높이 40px), 매장명 텍스트 크기 전체 (예: 16px), 아이콘 크기 전체 (예: 32px)  
　F. 공간 부족 시: 로고 크기 축소, 매장명 텍스트 크기 축소, 아이콘 간격 최소화 (예: 4px)  
　G. 매장명 길이에 따른 동적 조정: 긴 매장명은 텍스트 크기 자동 축소 또는 말줄임표 처리
