<!-- WF:DOC=DEV -->
**2.4.** 개발자 인터랙션 명세  


**2.4.1.** 화면 초기 로딩  

**2.4.1.1.** API 호출  
1: 알림 정보 조회  
　A. 엔드포인트: GET /api/partner/notifications/summary  
　B. 응답 데이터  

| 필드 | 타입 | 설명 |
|---|---|---|
| unread_count | number | 미확인 알림 개수 |
| notifications | array | 최근 알림 목록 (최대 10개) |
| has_more | boolean | 추가 알림 존재 여부 |

2: 로딩 상태 처리  
　A. 알림 아이콘 로딩 중: 스켈레톤 UI 또는 로딩 스피너 표시  
　B. 로딩 완료 후: 알림 아이콘 렌더링 + 미확인 알림 뱃지 표시  


**2.4.2.** 검색창 인터랙션 처리  

**2.4.2.1.** 호버 이벤트 처리  
1: 돋보기 아이콘 호버  
　A. 이벤트: mouseenter  
　B. 동작: 입력창 슬라이드 확장  
　C. 상태 변수: isSearchExpanded = true  
　D. 이벤트: mouseleave (입력창 영역 포함)  
　E. 조건: 입력창에 텍스트가 없는 경우  
　F. 동작: 입력창 숨김, isSearchExpanded = false  

**2.4.2.2.** 클릭 이벤트 처리  
1: 돋보기 아이콘 클릭  
　A. 이벤트: onClick  
　B. 동작: 입력창 확장 + 자동 포커스  
　C. 상태 변수: isSearchExpanded = true, isSearchFocused = true  

2: 입력창 클릭  
　A. 이벤트: onClick  
　B. 동작: 입력창 포커스 활성화  
　C. 상태 변수: isSearchFocused = true  

**2.4.2.3.** 검색 API 호출  
1: 검색어 입력 시 (디바운스 적용)  
　A. 디바운스 시간: 300ms  
　B. 엔드포인트: GET /api/partner/search?q={query}  
　C. 요청 파라미터  

| 파라미터 | 타입 | 설명 |
|---|---|---|
| q | string | 검색어 |
| limit | number | 최대 결과 개수 (기본값: 10) |

　D. 응답 데이터  

| 필드 | 타입 | 설명 |
|---|---|---|
| results | array | 검색 결과 목록 |
| total_count | number | 전체 결과 개수 |
| categories | object | 카테고리별 결과 (menu, campaign, customer) |

2: 검색 결과 항목 구조  

| 필드 | 타입 | 설명 |
|---|---|---|
| id | string | 결과 항목 ID |
| type | string | 결과 유형 (menu, campaign, customer) |
| title | string | 표시 제목 |
| description | string | 부가 설명 |
| url | string | 이동 경로 |

**2.4.2.4.** 검색창 닫기 처리  
1: ESC 키 입력  
　A. 이벤트: keydown (key === 'Escape')  
　B. 동작: 입력창 닫힘, 텍스트 초기화  
　C. 상태 변수: isSearchExpanded = false, searchQuery = ''  

2: 외부 클릭  
　A. 이벤트: onClick (외부 영역)  
　B. 동작: 입력창 닫힘, 텍스트 초기화  
　C. 이벤트 전파 방지: event.stopPropagation()  


**2.4.3.** 알림창 인터랙션 처리  

**2.4.3.1.** 종 아이콘 클릭 처리  
1: 알림 드롭다운 토글  
　A. 이벤트: onClick  
　B. 동작: 드롭다운 표시/숨김 토글  
　C. 상태 변수: isNotificationDropdownOpen = !isNotificationDropdownOpen  

2: 알림 목록 API 호출  
　A. 엔드포인트: GET /api/partner/notifications  
　B. 요청 파라미터  

| 파라미터 | 타입 | 설명 |
|---|---|---|
| limit | number | 최대 결과 개수 (기본값: 10) |
| offset | number | 시작 위치 (기본값: 0) |

　C. 응답 데이터  

| 필드 | 타입 | 설명 |
|---|---|---|
| notifications | array | 알림 목록 |
| total_count | number | 전체 알림 개수 |
| unread_count | number | 미확인 알림 개수 |

3: 알림 항목 구조  

| 필드 | 타입 | 설명 |
|---|---|---|
| id | string | 알림 ID |
| type | string | 알림 유형 (report, stock, anomaly, grade, settlement, campaign) |
| message | string | 알림 메시지 |
| priority | string | 우선순위 (high, medium, low) |
| is_read | boolean | 읽음 여부 |
| created_at | string | 생성 시간 (ISO 8601) |
| action_url | string | 클릭 시 이동 경로 |

**2.4.3.2.** 알림 항목 클릭 처리  
1: 알림 읽음 처리 API 호출  
　A. 엔드포인트: PUT /api/partner/notifications/{notification_id}/read  
　B. 요청 바디: 없음  
　C. 응답: 성공 시 상태 업데이트  

2: 페이지 이동  
　A. 이동 경로: 알림 항목의 action_url  
　B. 드롭다운 닫기: isNotificationDropdownOpen = false  

**2.4.3.3.** 모두 읽음 처리  
1: 모두 읽음 API 호출  
　A. 엔드포인트: PUT /api/partner/notifications/read-all  
　B. 요청 바디: 없음  
　C. 응답: 성공 시 모든 알림 읽음 상태로 업데이트  
　D. UI 업데이트: 미확인 알림 뱃지 숨김  

**2.4.3.4.** 드롭다운 닫기 처리  
1: 외부 클릭  
　A. 이벤트: onClick (외부 영역)  
　B. 동작: 드롭다운 닫힘  
　C. 상태 변수: isNotificationDropdownOpen = false  

2: ESC 키 입력  
　A. 이벤트: keydown (key === 'Escape')  
　B. 동작: 드롭다운 닫힘  
　C. 상태 변수: isNotificationDropdownOpen = false  


**2.4.4.** 호버 툴팁 처리  

**2.4.4.1.** 알림 아이콘 호버  
1: 툴팁 표시  
　A. 이벤트: mouseenter  
　B. 지연 시간: 500ms (0.5초)  
　C. 조건별 툴팁 메시지  

| 조건 | 툴팁 메시지 |
|---|---|
| unread_count === 0 | '클릭하면 알림 목록이 표시됩니다' |
| unread_count > 0 | '{unread_count}개의 새로운 알림이 있습니다' |

　D. 이벤트: mouseleave  
　E. 툴팁 숨김: hideTooltip()  

**2.4.4.2.** 모바일 환경  
1: 호버 이벤트 비활성화: 모바일에서는 툴팁 표시하지 않음  
2: 터치 이벤트만 처리: 탭 시 바로 드롭다운 표시 또는 페이지 이동  


**2.4.5.** 에러 처리  

**2.4.5.1.** 검색 API 오류  
1: 검색 실패  
　A. 에러 메시지: "검색에 실패했습니다. 다시 시도해주세요"  
　B. 재시도 버튼 제공  
　C. 에러 로그 기록: console.error 또는 에러 로깅 서비스에 기록  

**2.4.5.2.** 알림 API 오류  
1: 알림 목록 로딩 실패  
　A. 에러 메시지: "알림을 불러오지 못했습니다"  
　B. 재시도 버튼 제공: "다시 시도" 버튼 클릭 시 API 재호출  
　C. 에러 로그 기록: console.error 또는 에러 로깅 서비스에 기록  

2: 알림 읽음 처리 실패  
　A. 에러 메시지: "알림 상태 업데이트에 실패했습니다"  
　B. 페이지 이동은 정상 처리 (읽음 처리만 재시도)  

**2.4.5.3.** 네트워크 오류  
1: 오프라인 감지 시  
　A. 메시지: "네트워크 연결을 확인해주세요"  
　B. 재시도 버튼 제공  
　C. 오프라인 상태 표시: 검색 아이콘, 알림 아이콘 비활성화  


**2.4.6.** 접근성 및 UX 고려사항  

**2.4.6.1.** 키섹션 네비게이션  
1: Tab 키로 검색 아이콘, 알림 아이콘 간 이동  
2: Enter 키 또는 Space 키로 클릭 동작 활성화  
3: ESC 키로 입력창/드롭다운 닫기  
4: 검색 결과/알림 목록에서 화살표 키로 항목 간 이동  

**2.4.6.2.** 스크린 리더 지원  
1: 검색 아이콘에 적절한 ARIA 라벨 적용  
　A. aria-label="검색"  
　B. aria-expanded="{isSearchExpanded}"  

2: 알림 아이콘에 적절한 ARIA 라벨 적용  
　A. aria-label="알림, {unread_count}개의 새로운 알림"  
　B. aria-expanded="{isNotificationDropdownOpen}"  

3: 드롭다운/입력창에 적절한 role 적용  
　A. 검색 결과: role="listbox"  
　B. 알림 드롭다운: role="menu"  

**2.4.6.3.** 로딩 상태 피드백  
1: 검색 중: 입력창 우측에 로딩 스피너 표시  
2: 알림 로딩 중: 드롭다운 내 스켈레톤 UI 표시  
3: 중복 요청 방지: 요청 중 추가 요청 무시  

**2.4.6.4.** 애니메이션  
1: 입력창 확장: slide-left 애니메이션 (0.2초)  
2: 입력창 축소: slide-right 애니메이션 (0.2초)  
3: 드롭다운 오픈: fade-in + slide-down 애니메이션 (0.2초)  
4: 드롭다운 닫기: fade-out + slide-up 애니메이션 (0.2초)  
5: 툴팁 표시: fade-in 애니메이션 (0.1초)  
6: 툴팁 숨김: fade-out 애니메이션 (0.1초)  

**2.4.6.5.** 레이아웃 반응형 처리  
1: 검색 아이콘, 알림 아이콘을 한 줄에 배치  
2: 화면 크기에 따라 아이콘 크기 자동 조정  
　A. 모바일: 아이콘 크기 20px, 간격 8px  
　B. 태블릿: 아이콘 크기 24px, 간격 12px  
　C. 데스크톱: 아이콘 크기 28px, 간격 16px  
3: 공간 부족 시: 아이콘 크기 축소, 아이콘 간격 최소화 (예: 4px)  
