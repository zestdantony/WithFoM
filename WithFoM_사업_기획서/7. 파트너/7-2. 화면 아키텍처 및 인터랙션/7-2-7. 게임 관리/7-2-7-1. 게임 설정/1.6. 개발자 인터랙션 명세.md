<!-- WF:DOC=DEV -->
**1.6.** 개발자 인터랙션 명세  


**1.6.1.** API 명세 — 파트너 자체 게임  


**1.6.1.1.** 현재 게임 조회 API  

1: 엔드포인트  
　A. `GET /api/v1/partner/game/current`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답 JSON  

```json
{
  "exists": true,
  "game": {
    "gameId": "g_abc123",
    "type": "ROULETTE",
    "typeLabel": "룰렛",
    "slotCount": 6,
    "name": "럭키 룰렛",
    "status": "ACTIVE",
    "createdAt": "2026-01-15",
    "appliedRewardCount": 4,
    "hasBlank": true,
    "totalQuantity": 1000,
    "remainingQuantity": 350,
    "remainingPercent": 35
  },
  "typeChange": {
    "used": 0,
    "limit": 1,
    "unlimited": false,
    "resetsAt": "2026-02-01"
  }
}
```  

3: 응답 필드  
　A. `exists`: 게임 존재 여부 (false 시 `game` 객체 null)  
　B. `game.type`: ROULETTE | GACHA | SCRATCH | LADDER  
　C. `game.slotCount`: 유형별 고정 슬롯 수(6/12/16/6)  
　D. `game.status`: ACTIVE | INACTIVE | PAUSED  
　E. `game.appliedRewardCount`: 현재 적용 중인 리워드 수  
　F. `game.totalQuantity`: 전체 리워드 총 발행 수량 합산  
　G. `game.remainingQuantity`: 전체 리워드 잔여 수량 합산  
　H. `game.remainingPercent`: 잔여 비율(%)  
　I. `typeChange.used`: 이번 달 사용 횟수  
　J. `typeChange.limit`: 플랜별 월 한도(베이직 1, 플러스 2, 프리미엄 -1=무제한)  
　K. `typeChange.unlimited`: 프리미엄 무제한 여부  


**1.6.1.2.** 게임 생성 API  

1: 엔드포인트  
　A. `POST /api/v1/partner/game`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "type": "ROULETTE",
  "name": "럭키 룰렛",
  "rewards": [
    {
      "sourceRewardId": "sr_100",
      "rank": 1,
      "probability": 5,
      "quantity": 100
    },
    {
      "sourceRewardId": "sr_200",
      "rank": 2,
      "probability": 15,
      "quantity": 200
    }
  ],
  "blank": {
    "enabled": true,
    "probability": 30,
    "message": "다음 기회에!"
  }
}
```  

3: 요청 필드  
　A. `type`: ROULETTE | GACHA | SCRATCH | LADDER (필수)  
　B. `name`: 게임 이름 (최대 20자, 선택 — 미입력 시 서버에서 "매장명의 유형명" 자동 생성)  
　C. `rewards`: 리워드 배열 (필수, blank.enabled=true 시 최소 1개, blank.enabled=false 시 최소 2개)  
　D. `blank`: 꽝 설정 (필수)  
　E. rewards + blank 합계 최소 2개 항목 + 확률 합계 100% 필수  

4: 응답  
　A. 성공: `{ "gameId": "g_abc123", "status": "ACTIVE", "slotCount": 6, "appliedRewardCount": 2 }`  
　B. 이미 게임 존재: `{ "error": "GAME_ALREADY_EXISTS" }`  
　C. 라이브러리 리워드 미존재: `{ "error": "REWARD_NOT_FOUND", "rewardId": "sr_100" }`  

5: 유의사항  
　A. 게임 생성과 동시에 리워드 적용(복사본 생성)  
　B. 조건 충족 시 즉시 ACTIVE 상태  


**1.6.1.3.** 게임 수정 API  

1: 엔드포인트  
　A. `PUT /api/v1/partner/game/{gameId}`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "name": "수정된 룰렛"
}
```  

3: 응답  
　A. 성공: `{ "gameId": "g_abc123", "updated": true }`  
　B. 게임 없음: `{ "error": "GAME_NOT_FOUND" }`  

4: 유의사항  
　A. 게임 유형(type)은 수정 불가(유형 변경은 별도 API)  
　B. 이름만 수정 가능  


**1.6.1.4.** 게임 삭제 API  

1: 엔드포인트  
　A. `DELETE /api/v1/partner/game/{gameId}`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답  
　A. 성공: `{ "deleted": true }`  
　B. 게임 없음: `{ "error": "GAME_NOT_FOUND" }`  

3: 유의사항  
　A. 삭제 시 적용 중인 리워드 복사본 함께 삭제  
　B. 저장 라이브러리·프리셋은 유지  
　C. typeChange 횟수 소모 없음(유형 변경 시만 소모)  


**1.6.1.5.** 게임 유형 변경 API  

1: 엔드포인트  
　A. `POST /api/v1/partner/game/change-type`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "newType": "GACHA",
  "name": "캡슐 뽑기"
}
```  

3: 응답  
　A. 성공: `{ "gameId": "g_def456", "type": "GACHA", "slotCount": 12, "carriedRewardCount": 4, "typeChange": { "used": 1, "limit": 1 } }`  
　B. 횟수 초과: `{ "error": "TYPE_CHANGE_LIMIT_EXCEEDED", "resetsAt": "2026-02-01" }`  
　C. 동일 유형: `{ "error": "SAME_TYPE_SELECTED" }`  

4: 유의사항  
　A. 기존 게임 삭제 → 새 게임 생성 (트랜잭션)  
　B. 기존 적용 리워드 복사본을 새 게임에 자동 이관  
　C. 등수·확률·수량·꽝 설정 모두 유지  
　D. typeChange.used 1 증가  


**1.6.1.6.** 게임 활성화 토글 API  

1: 엔드포인트  
　A. `PUT /api/v1/partner/game/{gameId}/activation`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "active": true
}
```  

3: 활성화 필수 조건 (서버 검증)  
　A. 리워드 기능 활성화 상태 (7-2-8-3 > 3.1.1.1. 리워드 활성화 ON)  
　B. 게임 유형 선택 완료 (type ≠ null)  
　C. 리워드+꽝 합계 최소 2개 이상 적용  
　D. 확률 합계 100%  
　E. 조건 미충족 시: `{ "error": "ACTIVATION_CONDITIONS_NOT_MET", "missing": ["REWARD_FEATURE_INACTIVE", "MIN_REWARD_COUNT"] }`  

4: 응답  
　A. 성공: `{ "gameId": "g_abc123", "status": "ACTIVE", "activatedAt": "2026-01-25T10:30:00" }`  
　B. 비활성화 성공: `{ "gameId": "g_abc123", "status": "INACTIVE" }`  

5: 리워드-게임 동기화  
　A. 리워드 기능 비활성화 이벤트 수신 시 → 게임 자동 INACTIVE 전환  
　B. 리워드 기능 재활성화 시 → 게임은 자동 활성화하지 않음 (파트너 수동 활성화 필요)  
　C. 동기화는 서버 이벤트 구독 방식으로 처리 (리워드 서비스 → 게임 서비스)  


**1.6.2.** API 명세 — 게임 리워드 구성  


**1.6.2.1.** 현재 게임 리워드 구성 조회 API  

1: 엔드포인트  
　A. `GET /api/v1/partner/game/{gameId}/rewards`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답 JSON  

```json
{
  "rewards": [
    {
      "activeRewardId": "ar_001",
      "sourceRewardId": "sr_100",
      "rank": 1,
      "type": "COUPON",
      "name": "10% 할인 쿠폰",
      "value": "10%",
      "probability": 5,
      "quantity": 100,
      "remainingQuantity": 85,
      "expiryType": "RELATIVE",
      "expiryDays": 30,
      "guidanceMessage": "축하합니다! 1등 당첨!",
      "conditions": { "minOrderAmount": 10000 }
    }
  ],
  "blank": {
    "enabled": true,
    "probability": 30,
    "message": "다음 기회에!"
  },
  "totalProbability": 100,
  "totalQuantity": 1000,
  "remainingQuantity": 350,
  "remainingPercent": 35,
  "estimatedBudget": 250000,
  "estimatedMinRevenue": 500000
}
```  

3: 응답 필드  
　A. `rewards[].activeRewardId`: 게임 적용 복사본 고유 ID  
　B. `rewards[].sourceRewardId`: 원본 저장 라이브러리 리워드 ID  
　C. `rewards[].rank`: 등수(1~6)  
　D. `rewards[].probability`: 당첨 확률(%)  
　E. `rewards[].quantity`: 총 발행 수량 (읽기 전용, 보충으로만 변경)  
　F. `rewards[].remainingQuantity`: 잔여 수량  
　G. `rewards[].expiryType`: RELATIVE(상대) | ABSOLUTE(절대)  
　H. `rewards[].guidanceMessage`: 게임 적용 시 안내 문구  
　I. `blank.enabled`: 꽝 포함 여부  
　J. `totalQuantity`: 전체 리워드 총 발행 수량 합산  
　K. `remainingQuantity`: 전체 잔여 수량 합산  
　L. `remainingPercent`: 잔여 비율(%)  


**1.6.2.2.** 게임 리워드 구성 업데이트 API (1.3. 편집기 반영용)  

1: 엔드포인트  
　A. `PUT /api/v1/partner/game/{gameId}/rewards`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "rewards": [
    {
      "activeRewardId": "ar_001",
      "rank": 1,
      "probability": 5
    },
    {
      "activeRewardId": null,
      "sourceRewardId": "sr_200",
      "rank": 2,
      "probability": 15,
      "quantity": 200
    }
  ],
  "blank": {
    "enabled": true,
    "probability": 30,
    "message": "다음 기회에!"
  }
}
```  

3: 요청 필드  
　A. `rewards[].activeRewardId`: 기존 복사본 ID (null이면 신규 추가 → sourceRewardId + quantity 필수)  
　B. `rewards[].sourceRewardId`: 라이브러리에서 새로 추가 시 원본 ID  
　C. `rewards[].quantity`: 신규 추가 시 발행 수량 (기존 복사본은 수량 변경 불가)  
　D. 확률 합계 ≠ 100% 시 서버 거부: `{ "error": "PROBABILITY_SUM_INVALID" }`  
　E. 리워드+꽝 합계 < 2개 시 서버 거부: `{ "error": "MIN_REWARD_COUNT" }`  
　F. 꽝 ON(blank.enabled=true) 시 리워드 최대 5개 초과 거부: `{ "error": "MAX_REWARD_WITH_BLANK" }`  
　G. 꽝 OFF(blank.enabled=false) 시 리워드 최대 6개 초과 거부: `{ "error": "MAX_REWARD_EXCEEDED" }`  
　H. 꽝 OFF 전환 시 리워드 2개 미만이면 거부: `{ "error": "BLANK_OFF_REQUIRES_MIN_REWARDS" }`  
　I. 꽝 메시지(blank.message) 최대 20자 초과 거부: `{ "error": "BLANK_MESSAGE_TOO_LONG" }`  

4: 응답  
　A. 성공: `{ "updated": true, "appliedRewardCount": 4 }`  
　B. 리워드 없음: `{ "error": "REWARD_NOT_FOUND", "rewardId": "sr_200" }`  


**1.6.2.3.** 게임 리워드 제거 API  

1: 엔드포인트  
　A. `DELETE /api/v1/partner/game/{gameId}/rewards/{activeRewardId}`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답  
　A. 성공: `{ "removed": true, "remainingCount": 3 }`  
　B. 최소 수량 미달: `{ "error": "MIN_REWARD_COUNT" }`  

3: 유의사항  
　A. 적용 해제 = 복사본 영구 삭제  
　B. 라이브러리 원본에는 영향 없음  
　C. 제거 후 최소 조건(2개 항목) 미달 시 서버 거부  


**1.6.2.4.** 리워드 총량 보충 API  

1: 엔드포인트  
　A. `POST /api/v1/partner/game/{gameId}/rewards/replenish`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "totalAmount": 500
}
```  

3: 응답  

```json
{
  "replenished": true,
  "distribution": [
    { "activeRewardId": "ar_001", "name": "10% 할인 쿠폰", "added": 150, "newQuantity": 250 },
    { "activeRewardId": "ar_002", "name": "포인트 500점", "added": 250, "newQuantity": 450 },
    { "activeRewardId": "ar_003", "name": "1000원 할인", "added": 100, "newQuantity": 200 }
  ],
  "newTotalQuantity": 1500,
  "newRemainingQuantity": 500,
  "gameStatus": "ACTIVE"
}
```  

4: 유의사항  
　A. 입력 총량을 현재 확률 비율에 따라 각 리워드에 자동 분배  
　B. 소진된 리워드 재활성화(당첨 후보 복원)  
　C. 게임이 PAUSED 상태였을 경우 자동으로 ACTIVE 전환  


**1.6.3.** API 명세 — 파트너 게임 프리셋  


**1.6.3.1.** 프리셋 목록 조회 API  

1: 엔드포인트  
　A. `GET /api/v1/partner/game/presets?scope=PARTNER`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답 JSON  

```json
{
  "presets": [
    {
      "presetId": "ps_001",
      "name": "기본 구성",
      "savedAt": "2026-01-20",
      "rewardCount": 4,
      "isComplete": true,
      "items": [
        {
          "sourceRewardId": "sr_100",
          "rewardName": "10% 할인 쿠폰",
          "rank": 1,
          "probability": 5,
          "quantity": 100,
          "exists": true
        }
      ],
      "blank": {
        "enabled": true,
        "probability": 30,
        "message": "다음 기회에!"
      }
    }
  ],
  "limit": 1,
  "used": 1
}
```  

3: 응답 필드  
　A. `presets[].isComplete`: 모든 참조 리워드가 라이브러리에 존재하면 true  
　B. `presets[].items[].exists`: 해당 sourceRewardId가 라이브러리에 존재 여부  
　C. `limit`: 플랜별 저장 한도(베이직 1, 플러스 2, 프리미엄 4)  


**1.6.3.2.** 프리셋 저장 API  

1: 엔드포인트  
　A. `POST /api/v1/partner/game/presets`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "scope": "PARTNER",
  "name": "기본 구성",
  "items": [
    {
      "sourceRewardId": "sr_100",
      "rank": 1,
      "probability": 5,
      "quantity": 100
    }
  ],
  "blank": {
    "enabled": true,
    "probability": 30,
    "message": "다음 기회에!"
  }
}
```  

3: 응답  
　A. 성공: `{ "presetId": "ps_002", "saved": true }`  
　B. 한도 초과: `{ "error": "PRESET_LIMIT_EXCEEDED", "limit": 1 }`  
　C. 절대 유효기간 리워드 자동 제외 시: `{ "presetId": "ps_002", "saved": true, "excludedCount": 1, "excludedRewards": ["sr_300"] }`  


**1.6.3.3.** 프리셋 적용 API  

1: 엔드포인트  
　A. `POST /api/v1/partner/game/{gameId}/presets/{presetId}/apply`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답  
　A. 성공: `{ "applied": true, "appliedRewardCount": 4 }`  
　B. 불완전 프리셋: `{ "applied": true, "appliedRewardCount": 3, "missingCount": 1, "warning": "INCOMPLETE_PRESET" }`  
　C. 적용 시 sourceRewardId 기반으로 라이브러리에서 새 복사본 생성  


**1.6.3.4.** 프리셋 삭제 API  

1: 엔드포인트  
　A. `DELETE /api/v1/partner/game/presets/{presetId}`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답  
　A. 성공: `{ "deleted": true }`  


**1.6.4.** API 명세 — 광고주 게임  


**1.6.4.1.** 광고주 게임 참여 상태 조회 API  

1: 엔드포인트  
　A. `GET /api/v1/partner/advertiser-game/participation`  
　B. 인증: Bearer Token (파트너 세션)  

2: 응답 JSON  

```json
{
  "enabled": true,
  "rewardPool": {
    "count": 3,
    "totalProbability": 100,
    "rewards": [
      {
        "activeRewardId": "ar_adv_001",
        "sourceRewardId": "sr_100",
        "name": "500원 할인 쿠폰",
        "type": "COUPON",
        "probability": 50,
        "expiryType": "RELATIVE",
        "expiryDays": 14
      }
    ]
  },
  "campaigns": [
    {
      "campaignId": "c_001",
      "campaignName": "신제품 런칭 이벤트",
      "advertiserName": "ABC 브랜드",
      "period": "2026-01-01 ~ 2026-03-31",
      "status": "ACTIVE"
    }
  ]
}
```  

3: 응답 필드  
　A. `enabled`: 7등 리워드 참여 ON/OFF  
　B. `rewardPool`: 7등 리워드 풀 현재 구성  
　C. `campaigns`: 연결된 광고주 캠페인 목록(읽기 전용)  


**1.6.4.2.** 광고주 게임 참여 토글 API  

1: 엔드포인트  
　A. `PUT /api/v1/partner/advertiser-game/participation`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "enabled": false
}
```  

3: 응답  
　A. 성공: `{ "enabled": false, "updatedAt": "2026-01-25T10:30:00" }`  

4: 유의사항  
　A. OFF 시 7등 리워드 풀·프리셋 데이터 유지  
　B. 모든 연결 캠페인에 일괄 적용  


**1.6.4.3.** 7등 리워드 풀 업데이트 API  

1: 엔드포인트  
　A. `PUT /api/v1/partner/advertiser-game/reward-pool`  
　B. 인증: Bearer Token (파트너 세션)  

2: 요청 Body  

```json
{
  "rewards": [
    {
      "activeRewardId": "ar_adv_001",
      "probability": 50
    },
    {
      "activeRewardId": null,
      "sourceRewardId": "sr_200",
      "probability": 50
    }
  ]
}
```  

3: 응답  
　A. 성공: `{ "updated": true, "poolCount": 2 }`  
　B. 확률 합계 오류: `{ "error": "PROBABILITY_SUM_INVALID" }`  

4: 유의사항  
　A. 꽝 없음(100% 리워드 당첨)  
　B. 최대 6개  
　C. 최소 1개 미달 시 서버 거부: `{ "error": "MIN_POOL_REWARD_COUNT" }`  


**1.6.4.4.** 광고주 게임 프리셋 관리 API  

1: 프리셋 조회  
　A. `GET /api/v1/partner/game/presets?scope=ADVERTISER`  
　B. 응답 구조: 1.6.3.1.과 동일(scope 필터)  

2: 프리셋 저장  
　A. `POST /api/v1/partner/game/presets` + `scope: "ADVERTISER"`  
　B. 저장 항목: sourceRewardId + probability (등수·수량·꽝 없음)  
　C. 한도: 베이직 1, 플러스 2, 프리미엄 4 (파트너 프리셋과 별도 카운트)  

3: 프리셋 적용  
　A. `POST /api/v1/partner/advertiser-game/presets/{presetId}/apply`  

4: 프리셋 삭제  
　A. `DELETE /api/v1/partner/game/presets/{presetId}`  


**1.6.5.** 컴포넌트 구현 참고  


**1.6.5.1.** 탭 UI 분기  

1: 페이지 로드 시 `GET /api/v1/partner/game/current` + `GET /api/v1/partner/advertiser-game/participation` 병렬 호출  
2: 탭 전환 시 추가 API 호출 없음(초기 로드 데이터 사용, 반영 시만 재호출)  

**1.6.5.2.** 1.3. 편집기 상태 관리  

1: 서버 데이터(GET rewards)를 로컬 상태에 복사  
2: 편집 중 변경사항은 로컬에서만 유지  
3: [게임에 반영] 클릭 시 PUT rewards 호출 → 성공 시 로컬 상태 갱신  
4: 탭 전환·페이지 이동 시 미저장 변경 감지 → 확인 모달  

**1.6.5.3.** 복사본 ID 관리  

1: `activeRewardId`: 게임 적용 복사본의 고유 ID (서버 생성)  
2: `sourceRewardId`: 원본 라이브러리 리워드 ID  
3: 새 리워드 추가 시: `activeRewardId = null`, `sourceRewardId` 필수 → 서버가 복사본 생성 + activeRewardId 반환  
4: 기존 리워드 수정 시: `activeRewardId` 필수  

**1.6.5.4.** 프리셋 완전성 표시  

1: `isComplete === false` → 프리셋 카드에 경고 아이콘 + "불완전" 배지  
2: `items[].exists === false` → 해당 리워드 취소선 처리 + 비활성 상태  
3: 불완전 프리셋 적용 시 유효 항목만 적용 → 확률 합계 미달 안내  

**1.6.5.5.** 수량 소진 감시  

1: 게임 참여 처리 시 서버에서 잔여 수량 자동 감소  
2: 개별 리워드 잔여 = 0 시 해당 리워드 당첨 후보 제외 + 확률 재분배  
3: 총 잔여 ≤ 총 발행의 10% 시 파트너 알림 트리거  
4: 총 잔여 = 0 시 게임 상태 PAUSED 전환 + 파트너 알림 트리거  
5: 보충 API 호출 시 PAUSED → ACTIVE 자동 전환  


**1.6.5.6.** 슬롯-리워드 시각 배분 (클라이언트)  

1: 배분 알고리즘  
　A. 리워드+꽝 항목 수가 고정 슬롯 수보다 적을 때 적용  
　B. 1단계: 각 항목에 최소 1개 슬롯 배정  
　C. 2단계: 여분 슬롯을 확률이 높은 항목부터 1개씩 순환 배정  
　D. 3단계: 동일 항목 슬롯이 인접하지 않도록 분산 배치  

2: 소진 리워드 슬롯 표시  
　A. 소진된 리워드에 배정된 슬롯은 비활성(회색) 처리 + "소진" 표시  
　B. 시각적으로만 비활성이며, 실제 당첨은 서버 확률 엔진이 결정  


**1.6.5.7.** 게임 상태 전이 및 재개  

1: 게임 상태 정의  
　A. `ACTIVE`: 정상 운영 — 소비자 참여 가능  
　B. `INACTIVE`: 비활성화 — 파트너 수동 비활성화 또는 리워드 기능 OFF 연동  
　C. `PAUSED`: 일시정지 — 전체 리워드 소진 시 자동 전환  

2: PAUSED → ACTIVE 전환 조건  
　A. 리워드 보충 API(1.6.2.4.) 호출 시 자동 전환  
　B. 전환 시 "준비 중" 오버레이 해제만 처리  
　C. 별도 "리워드 보충됨" 메시지·푸시 알림 없음 (소비자에게 내부 사정 비공개)  

3: 리워드-게임 활성화 동기화  
　A. 리워드 기능 OFF 이벤트 → 게임 INACTIVE 전환 (1.6.1.6. 5항 참조)  
　B. 리워드 기능 ON 이벤트 → 게임 자동 활성화 없음 (파트너 수동 토글)  


**1.6.5.8.** 유형 변경 횟수 월간 초기화  

1: 스케줄러  
　A. 매월 1일 00:00 KST cron 실행  
　B. 전체 파트너의 `typeChange.used` → 0 초기화  
　C. 프리미엄 플랜(unlimited=true)은 초기화 대상에서 제외 (항상 0)  


**1.6.5.9.** 멤버십 다운그레이드 프리셋 처리  

1: 다운그레이드 이벤트 수신 시 처리 흐름  

```
멤버십 다운그레이드 이벤트 수신
  └─ 1. 파트너/광고주 프리셋 모두 잠금 상태 전환 (locked: true)
       └─ 2. 파트너에게 알림: "멤버십 변경으로 프리셋이 잠금 처리되었습니다. 유지할 프리셋을 선택해 주세요."
            └─ 3. 프리셋 선택 API: PUT /api/v1/partner/game/presets/select
                   요청: { "scope": "PARTNER", "keepPresetIds": ["ps_001"] }
                   서버: 선택된 프리셋만 잠금 해제 + 미선택 프리셋 영구 삭제
            └─ 4. 광고주 프리셋도 동일 흐름 (scope: "ADVERTISER")
  └─ 유형 변경 한도도 새 플랜 기준 즉시 적용
```

2: 선택 기한  
　A. 다운그레이드 후 30일 이내 미선택 시 → 가장 최근 저장된 프리셋을 한도 수만큼 자동 유지 + 나머지 삭제  
　B. 자동 처리 후 파트너 알림  


**1.6.5.10.** 예산·매출 추정 입력  

1: 추정 계산 파라미터  
　A. `estimatedPlays`: 예상 참여 수 (선택, 미입력 시 직전 30일 평균 일일 참여 수 × 30으로 자동 계산)  
　B. 서버 계산: 각 리워드의 (확률 × estimatedPlays × 리워드 원가)를 합산하여 `estimatedBudget` 산출  
　C. `estimatedMinRevenue`: 각 리워드의 (확률 × estimatedPlays × 최소주문금액)를 합산  
　D. 해당 수치는 추정치이며 참고 용도임을 UI에 표시  


**1.6.6.** 에러 처리  


**1.6.6.1.** 에러 코드  

1: GAME_001: 게임 조회 실패  
2: GAME_002: 게임 이미 존재 (중복 생성 방지)  
3: GAME_003: 유형 변경 횟수 초과  
4: GAME_004: 확률 합계 불일치 (≠ 100%)  
5: GAME_005: 프리셋 저장 한도 초과  
6: GAME_006: 참조 리워드 미존재 (라이브러리에서 삭제됨)  
7: GAME_007: 광고주 게임 참여 상태 변경 실패  
8: GAME_008: 최소 리워드 수 미달 (리워드+꽝 < 2개)  
9: GAME_009: 리워드 보충 실패  
10: GAME_010: 게임 활성화 조건 미충족  
11: GAME_011: 꽝 ON 시 리워드 5개 초과  
12: GAME_012: 꽝 OFF 전환 시 리워드 2개 미만  
13: GAME_013: 꽝 메시지 20자 초과  
14: GAME_014: 광고주 7등 리워드 풀 최소 1개 미달  
15: GAME_015: 프리셋 선택 기한 초과 (자동 처리됨)  

**1.6.6.2.** 공통  

1: 인증 실패: 401, 로그인 페이지로 유도  
2: 5xx: "일시적인 오류가 발생했습니다" + 재시도 안내  


• 참조: 1.0.~1.5. 게임 설정 전 섹션, 7-2-8-3 > 3.1. 리워드, 7-2-7-2. 코인 관리 > 2.6. 개발자 인터랙션 명세  
