<!-- WF:DOC=DEV -->
**2.1.3.** 개발자 인터랙션 명세  


**2.1.3.1.** 나의 등급 조회 API  

1: 엔드포인트  
　A. GET /api/v1/partner/grade/my-status  

2: 요청 파라미터  
　A. partnerId: 파트너 ID (JWT에서 자동 추출)  

3: 응답 구조  

```json
{
  "partnerId": "PTN-001",
  "currentGrade": {
    "grade": "gold",
    "gradeName": "골드",
    "gradeIcon": "🥇",
    "gradeColor": "#FFD700",
    "since": "2025-07-01T00:00:00Z",
    "validUntil": "2026-06-30T23:59:59Z"
  },
  "score": {
    "total": 64,
    "breakdown": {
      "reportRate": { "value": 95, "score": 60, "weighted": 27 },
      "scanRate": { "value": 105, "score": 60, "weighted": 27 },
      "withfomOrder": { "used": true, "score": 100, "weighted": 10 }
    }
  },
  "benefits": {
    "cupholder": "무료 제공",
    "membership": "30% 할인",
    "incentive": null
  },
  "nextGrade": {
    "grade": "platinum",
    "requiredScore": 73,
    "gap": 9,
    "achievable": true
  },
  "unmatchedStatus": {
    "isUnmatched": true,
    "lastCampaignEndDate": "2025-01-15",
    "unmatchedDays": 45,
    "unmatchedMonths": 1.5,
    "downgradeDate": "2025-07-15",
    "daysUntilDowngrade": 135,
    "warningLevel": null,
    "alerts": {
      "firstWarning": { "sent": false, "triggerDate": "2025-04-15" },
      "finalWarning": { "sent": false, "triggerDate": "2025-06-08" }
    }
  },
  "benefitMaintenance": {
    "message": "현재 등급 혜택은 등급 변동 전까지 유지됩니다",
    "downgradeImpact": "등급 하락 시 새 등급 혜택 적용"
  }
}
```


**2.1.3.2.** 컴포넌트 상태 관리  

1: 로딩 상태 (loadingState)  
　A. loading: 데이터 로딩 중  
　B. ready: 데이터 로드 완료  
　C. error: 에러 발생  


**2.1.3.3.** 실시간 데이터 연동  

1: WebSocket 이벤트  
　A. grade.current_updated: 현재 등급 정보 갱신  
　B. grade.score_changed: 등급 점수 변동  
　C. grade.warning: 등급 하락 위험 경고  
　D. grade.unmatched_warning: 미매칭 경고 알림 (3개월, 5개월 3주차)  
　E. grade.downgrade: 다운그레이드 적용 알림  
　F. grade.campaign_matched: 캠페인 매칭 완료 (등급 유지 확정)  
　G. grade.recalculated: 캠페인 종료 후 등급 재산정 완료  

2: 연결 정보  
　A. 엔드포인트: wss://api.withfom.com/partner/grade/status/realtime  
　B. 인증: JWT 토큰 기반 연결  

3: 이벤트 페이로드  

```json
// grade.unmatched_warning (1차 알림 - 3개월 경과)
{
  "type": "unmatched_warning",
  "warningLevel": "first",
  "unmatchedDays": 90,
  "daysUntilDowngrade": 90,
  "currentGrade": "gold",
  "targetGrade": "silver",
  "title": "등급 유지 안내",
  "message": "마지막 캠페인 종료 후 3개월이 지났습니다. 골드 등급 유지를 위해 새로운 캠페인에 참여가 시급합니다. (미참여 시 실버로 조정)",
  "cta": { "text": "캠페인 참여하기", "target": "/partner/campaign/order" },
  "channels": { "push": true, "inApp": true, "email": true }
}

// grade.unmatched_warning (최종 알림 - 5개월 3주차)
{
  "type": "unmatched_warning",
  "warningLevel": "final",
  "unmatchedDays": 173,
  "daysUntilDowngrade": 7,
  "currentGrade": "gold",
  "targetGrade": "silver",
  "title": "[최종 알림] 등급 조정 예정",
  "message": "등급 조정까지 7일 남았습니다. 골드 등급과 혜택을 유지하기 위해 새 캠페인 참여가 시급합니다. (미참여 시 실버로 조정)",
  "cta": { "text": "캠페인 참여하기", "target": "/partner/campaign/order" },
  "channels": { "push": true, "inApp": true, "email": true }
}

// grade.downgrade
{
  "type": "downgrade",
  "previousGrade": "gold",
  "newGrade": "silver",
  "effectiveDate": "2025-07-15",
  "title": "등급 변경 안내",
  "message": "등급이 골드에서 실버로 변경되었습니다. 새 캠페인에 참여하시면 등급을 다시 높일 수 있습니다.",
  "cta": { "text": "캠페인 참여하기", "target": "/partner/campaign/order" },
  "channels": { "push": true, "inApp": true, "email": true }
}

// grade.recalculated (업그레이드)
{
  "type": "recalculated",
  "previousGrade": "silver",
  "newGrade": "gold",
  "upgraded": true,
  "newScore": 64,
  "effectiveDate": "2025-08-01",
  "title": "등급 상승 축하드립니다",
  "message": "등급이 실버에서 골드로 상승했습니다. 새로운 혜택을 확인해 보세요.",
  "cta": { "text": "혜택 확인하기", "target": "/partner/grade/benefits" },
  "channels": { "push": true, "inApp": true, "email": true }
}
```  


**2.1.3.4.** 접근성 요구사항  

1: 섹션 ARIA  
　A. role="region"  
　B. aria-labelledby="my-grade-title"  

2: 등급 마크 ARIA  
　A. role="img" (정보 표시용)  
　B. aria-label="현재 등급: {등급명}"  

3: 키보드 내비게이션  
　A. Tab: 등급 마크, 버튼 간 이동  
　B. Enter/Space: 클릭 동작  


**2.1.3.5.** 에러 처리  

1: 에러 코드  
　A. GRS_001: 등급 현황 조회 실패  

2: 사용자 메시지  
　A. "등급 현황을 불러오지 못했습니다"  
　B. 재시도 버튼 표시  


• 참조: 7-2-4-1 > 1.1.3. 개발자 인터랙션 명세
