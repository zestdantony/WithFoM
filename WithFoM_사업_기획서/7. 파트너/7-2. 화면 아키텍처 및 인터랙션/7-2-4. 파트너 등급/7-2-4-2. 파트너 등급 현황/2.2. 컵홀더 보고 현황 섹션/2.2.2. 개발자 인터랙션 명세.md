<!-- WF:DOC=DEV -->
**2.2.2.** 개발자 인터랙션 명세  


**2.2.2.1.** 컵홀더 보고 현황 조회 API  

1: 엔드포인트  
　A. GET /api/v1/partner/grade/report-status  

2: 요청 파라미터  
　A. partnerId: 파트너 ID (JWT에서 자동 추출)  

3: 응답 구조  

```json
{
  "hasCampaign": true,
  "weekly": {
    "startDate": "2026-01-20",
    "endDate": "2026-01-26",
    "businessDays": 6,
    "reportedDays": 5,
    "reportRate": 83.3,
    "expectedConsumption": 150,
    "actualReported": 125
  },
  "currentCampaign": {
    "campaignId": "CMP-2026-001",
    "totalCupholders": 500,
    "reportedCupholders": 380,
    "reportedDays": 38,
    "totalBusinessDays": 50,
    "reportRate": 76.0
  },
  "cumulative": {
    "periodLabel": "현재 4개월 / 6개월",
    "isComplete": false,
    "totalReceived": 2500,
    "totalReported": 2350,
    "reportedDays": 120,
    "totalBusinessDays": 128,
    "reportRate": 94.0
  },
  "gradeRequirements": {
    "bronze": { "reportRate": 84, "actualRate": 70 },
    "silver": { "reportRate": 85, "actualRate": 70 },
    "gold": { "reportRate": 100, "actualRate": 90 }
  },
  "currentLevel": "silver"
}
```


**2.2.2.2.** 내부 계산 로직  

↳ 아래 계산 방식은 시스템 내부 처리이며 화면에 표시되지 않음  

1: 이번주 보고율 계산  
　A. 보고율 = (보고 갯수 / 예상 소진 수) × 100  
　B. 예상 소진 수 = 영업일 × 일평균 소진량  

2: 현재 캠페인 보고율 계산  
　A. 보고율 = (누적 보고 갯수 / 캠페인 컵홀더 총 갯수) × 100  

3: 누적 보고율 계산  
　A. 보고율 = (산정 기간 보고 갯수 / 산정 기간 컵홀더 입고 수) × 100  
　B. 컵홀더 입고 수 산출  
　　a. 종료된 캠페인: 해당 캠페인에서 진행한 컵홀더 실제 수량  
　　b. 진행중인 캠페인: 일할 계산된 현재까지의 수량 (캠페인 총 수량 × 경과일 / 총 캠페인 일수)  
　　c. 입고 수 = 종료된 캠페인 수량 합계 + 진행중인 캠페인 일할 수량  


**2.2.2.3.** 컴포넌트 구현  

1: 렌더링 방식  
　A. 정보 표시 전용 (읽기 전용 컴포넌트)  
　B. 클릭 이벤트 핸들러 없음  
　C. 상태 관리 불필요 (인터랙션 없음)  

2: 프로그래스 바 색상 분기  

```javascript
const getReportProgressColor = (rate) => {
  if (rate >= 100) return '#22C55E'; // 초록
  if (rate >= 85) return '#3B82F6';  // 파랑
  if (rate >= 70) return '#F59E0B';  // 주황
  return '#EF4444';                   // 빨강
};
```

3: 캠페인 미참여 시 처리  
　A. hasCampaign === false인 경우 weekly, currentCampaign 영역 숨김  
　B. cumulative 영역만 렌더링  

4: 프로그래스 바 제목 분기  

```javascript
const getCumulativeTitle = (periodLabel, isComplete) => {
  if (isComplete) {
    // 산정 기간 완료: "6개월 누적 보고율"
    return periodLabel + ' 누적 보고율';
  }
  // 산정 기간 진행 중: "현재 4개월 / 6개월 누적 보고율"
  return periodLabel + ' 누적 보고율';
};
```

5: 등급 기준 달성 여부 렌더링  
　A. cumulative.reportRate와 gradeRequirements 비교  
　B. 달성: 초록색 체크 아이콘 + "달성"  
　C. 미달성: 빨간색 X 아이콘 + "미달성"  


**2.2.2.4.** 접근성 요구사항  

1: 프로그래스 바 ARIA  
　A. role="progressbar"  
　B. aria-valuenow="{현재값}"  
　C. aria-valuemin="0"  
　D. aria-valuemax="100"  
　E. aria-label="보고율 진행률"  

2: 달성 여부 ARIA  
　A. role="status"  
　B. aria-label="등급 기준 달성 여부: {달성/미달성}"  


**2.2.2.5.** 에러 처리  

1: 에러 코드  
　A. GRS_002: 보고 현황 조회 실패  

2: 사용자 메시지  
　A. "보고 현황 정보를 불러오지 못했습니다"  
　B. 재시도 버튼 표시 (유일한 인터랙션: 데이터 재조회)  


**2.2.2.6.** 성능 최적화  

1: 캐싱  
　A. 세션 스토리지에 30분 캐싱  
　B. 페이지 진입 시 캐시 유효성 확인 후 API 호출  

2: 프로그래스 바 애니메이션  
　A. 초기 로딩 시 CSS transition으로 너비 채움 (500ms, ease-out)  
　B. 뷰포트 진입 시 애니메이션 시작 (Intersection Observer)  


• 참조: 7-2-4-2 > 2.3.2. 개발자 인터랙션 명세
