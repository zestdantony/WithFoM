**2.6.5.** 저장 처리  


**1.6.5.1.** 저장 버튼 클릭  

　1: 사전 검증  
　　A. 리워드 기능 Off 선택 시: 즉시 저장 가능  
　　B. 리워드 기능 On 선택 시  
　　　　a. 최소 1개 이상의 리워드 정보 입력 확인 (쿠폰, 포인트 쿠폰, 스탬프 중 1개)  
　　　　b. 각 리워드의 필수 항목 입력 완료 확인  
　　　　c. 입력값 유효성 검사 통과 확인  

　2: API 호출  
　　A. 엔드포인트: POST /api/partner/onboarding/save-reward-info  
　　B. 요청 데이터  

| 필드 | 타입 | 설명 |  
|---|---|---|  
| reward_enabled | boolean | 리워드 기능 활성화 여부 |  
| coupons | array | 쿠폰 정보 배열 |  
| point_coupons | array | 포인트 쿠폰 정보 배열 |  
| stamp_card | object | 스탬프 카드 정보 (null 시 미설정) |  
| source | string | 진입 경로 (onboarding) |  

　3: 저장 처리  
　　A. 리워드 정보 저장  
　　B. 리워드 기능 활성화 상태 업데이트  
　　C. 게임 기능 자동 활성화 (리워드 활성화 시)  


**1.6.5.2.** 저장 요청 데이터 상세 구조  

　1: 쿠폰 데이터 구조 (coupons 배열 요소)  

| 필드 | 타입 | 필수 | 설명 |  
|---|---|---|---|  
| name | string | ✓ | 쿠폰명 (최대 50자) |  
| discount_type | string | ✓ | "amount" 또는 "percent" |  
| discount_value | number | ✓ | 할인 금액(원) 또는 할인율(%) |  
| total_quantity | number | - | 총 발행 수량 (null 시 무제한) |  
| valid_period | object | ✓ | 유효 기간 |  
| conditions | object | - | 사용 조건 |  
| limits | object | - | 사용 제한 |  

　2: 포인트 쿠폰 데이터 구조 (point_coupons 배열 요소)  

| 필드 | 타입 | 필수 | 설명 |  
|---|---|---|---|  
| name | string | ✓ | 포인트 쿠폰명 (최대 50자) |  
| point_amount | number | ✓ | 포인트 금액 (100~50,000) |  
| total_quantity | number | - | 총 발행 수량 (null 시 무제한) |  
| valid_period | object | ✓ | 유효 기간 |  
| conditions | object | - | 사용 조건 |  
| limits | object | - | 사용 제한 |  

　3: 스탬프 카드 데이터 구조 (stamp_card 객체)  

| 필드 | 타입 | 필수 | 설명 |  
|---|---|---|---|  
| earn_threshold | number | ✓ | 1개 적립 기준 금액 (원) |  
| multiple_earn_enabled | boolean | ✓ | 다중 적립 활성화 여부 |  
| valid_period | object | ✓ | 유효 기간 (기본값: 1년) |  
| daily_limit | number | - | 1일 적립 한도 (null 시 무제한) |  
| exclusions | object | - | 적립 제외 항목 |  
| rewards | array | ✓ | N개 적립 시 혜택 배열 (1~3개) |  

　4: 스탬프 혜택 데이터 구조 (stamp_card.rewards 배열 요소)  

| 필드 | 타입 | 필수 | 설명 |  
|---|---|---|---|  
| count | number | ✓ | 적립 개수 |  
| reward | string | ✓ | 혜택 내용 (최대 20자) |  


**1.6.5.3.** 저장 성공 시 처리  

　1: 성공 응답 수신  
　　A. 저장된 리워드 정보 반환  
　　B. 파트너 리워드 설정 상태 업데이트  

　2: 화면 전환  
　　A. 다음 가입 단계로 리다이렉트: /partner/onboarding/next-step  
　　B. 성공 토스트 메시지: "리워드 정보가 저장되었습니다"  


**1.6.5.4.** 저장 실패 시 처리  

　1: 에러 응답 처리  
　　A. 에러 메시지 표시  
　　B. 필드별 에러가 있는 경우: 해당 필드에 에러 표시  

　2: 재시도  
　　A. 입력 정보 수정 후 재시도 가능  
　　B. 에러 로그 기록  

